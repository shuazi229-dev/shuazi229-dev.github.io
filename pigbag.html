<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pig pig Pig‘tasks</title>
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 使用内联SVG图标代替Font Awesome -->
    
    <!-- 自定义配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF3366',
                        secondary: '#33CCFF',
                        accent: '#FFCC00',
                        dark: '#4A4A4A',
                        light: '#FFF9F9'
                    },
                    fontFamily: {
                        funny: ['"Comic Sans MS"', '"Marker Felt"', 'cursive', 'sans-serif'],
                        sans: ['"Comic Sans MS"', '"Marker Felt"', 'cursive', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            /* 动画效果 */
            .bounce-xl {
                animation: bounceXL 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.4);
            }
            .shake-crazy {
                animation: shakeCrazy 0.5s ease-in-out;
            }
            .spin-wild {
                animation: spinWild 1s ease-in-out;
            }
            .float-random {
                animation: floatRandom 3s ease-in-out infinite;
            }
            .pop-big {
                animation: popBig 0.4s ease-out;
            }
            .fade-in-fast {
                animation: fadeIn 0.3s ease-out;
            }
            .fade-out-fast {
                animation: fadeOut 0.3s ease-out;
            }
            .slide-in {
                animation: slideIn 0.5s ease-out;
            }
            .pulse-annoying {
                animation: pulseAnnoying 1s infinite;
            }
        }
        
        /* 全局字体设置确保所有元素使用可爱风格字体，增强兼容性 */
        *, *::before, *::after {
            /* 优化字体堆栈，将系统默认字体放在最后，确保符号兼容性 */
            font-family: 'Comic Sans MS', 'Marker Felt', 'Arial Rounded MT Bold', 'Comic Neue', 'Kalam', 'Chalkboard SE', 'Marker Felt', 'Caveat', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'SimHei', sans-serif !important;
            font-weight: 500;
            letter-spacing: 0.02em;
            /* 确保文本渲染质量 */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* 确保body和主要内容区域的字体应用 */
        body, .content, .game-area, .task-container, .fortune-container, .breakfast-container {
            font-family: 'Comic Sans MS', 'Marker Felt', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'SimHei', sans-serif !important;
        }

        /* 特殊符号处理 */
        .symbol-container, .emoji, .icon, .fa {
            /* 为符号元素单独设置字体，优先使用系统默认字体确保符号兼容性 */
            font-family: 'FontAwesome', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Apple Color Emoji', 'Noto Color Emoji', 'Android Emoji', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'SimHei', sans-serif !important;
            font-style: normal !important;
            font-weight: normal !important;
            text-decoration: inherit !important;
        }

        /* 功能卡片图标增强 */
        .feature-card i {
            display: inline-block;
            text-rendering: auto;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        @keyframes bounceXL {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-30px) rotate(5deg); }
        }
        
        @keyframes shakeCrazy {
            0%, 100% { transform: translateX(0) rotate(0); }
            10% { transform: translateX(-10px) rotate(-5deg); }
            20% { transform: translateX(10px) rotate(5deg); }
            30% { transform: translateX(-10px) rotate(-5deg); }
            40% { transform: translateX(10px) rotate(5deg); }
            50% { transform: translateX(-10px) rotate(-5deg); }
            60% { transform: translateX(10px) rotate(5deg); }
            70% { transform: translateX(-10px) rotate(-5deg); }
            80% { transform: translateX(10px) rotate(5deg); }
            90% { transform: translateX(-10px) rotate(-5deg); }
        }
        
        @keyframes spinWild {
            0% { transform: rotate(0deg) scale(0.5); opacity: 0; }
            70% { transform: rotate(380deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); opacity: 1; }
        }
        
        @keyframes floatRandom {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(5px, -10px) rotate(2deg); }
            50% { transform: translate(0, -15px) rotate(0deg); }
            75% { transform: translate(-5px, -10px) rotate(-2deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }
        
        @keyframes popBig {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        @keyframes slideIn {
            from { transform: translateX(-30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes pulseAnnoying {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); box-shadow: 0 0 20px rgba(255, 51, 102, 0.6); }
        }
        /* 自定义小猪样式 */
        .pig-icon {
            background: linear-gradient(135deg, #ffb7d5 0%, #ff85b1 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(255, 102, 163, 0.3);
        }
        
        .pig-icon::before {
            content: "🐷";
            font-size: 3rem;
        }
        /* 贪吃蛇游戏样式 */
        #snake-game {
            position: relative;
        }
        
        #snake-board {
            border-collapse: collapse;
            margin: 0 auto;
            background-color: #f0f0f0;
            border: 4px solid #4A4A4A;
            border-radius: 8px;
        }
        
        #snake-board td {
            width: 12px;
            height: 12px;
        }
        
        .snake-head {
            background-color: #33CCFF;
            border-radius: 3px;
        }
        
        .snake-body {
            background-color: #66DDFF;
            border-radius: 2px;
        }
        
        .snake-food {
            background-color: #FF3366;
            border-radius: 50%;
        }
        
        .snake-bomb {
            background-color: #FFCC00;
            animation: flash 1s infinite;
        }
        
        @keyframes flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>

<body class="bg-gradient-to-br from-light to-pink-50 min-h-screen font-funny text-dark overflow-x-hidden">
    <!-- 音效提示（文字模拟） -->
    <div id="sound-effect" class="fixed top-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm z-50 hidden fade-in-fast">
        <svg class="w-5 h-5 mr-1 inline" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></svg> <span id="sound-text">叮咚～</span>
    </div>
    
    <!-- 主容器 -->
    <div class="max-w-3xl mx-auto p-4 md:p-6 relative">
        
        <!-- 标题区域 -->
        <header class="text-center mb-8 slide-in">
            <div class="relative inline-block mb-4">
                <!-- 使用Base64编码的粉色小猪SVG -->
                <div class="pig-icon w-24 h-24 rounded-full border-4 border-primary float-random">
                    <!-- SVG小猪图标将通过CSS伪元素显示 -->
                </div>
            </div>
            <h1 class="text-3xl md:text-4xl font-bold text-primary mb-2 bounce-xl">
                Pig pig Pig's tasks
            </h1>
            <p class="text-gray-600 text-lg mb-6">Please experience and relax!</p>
            <div class="w-40 h-1 bg-secondary mx-auto rounded-full"></div>
        </header>
        
        <!-- 主菜单 -->
        <div id="main-menu" class="grid grid-cols-2 gap-4 mb-8 fade-in-fast">
            <!-- 功能卡片1：贪吃蛇 -->
            <div class="feature-card bg-white rounded-2xl shadow-lg p-5 text-center cursor-pointer transform transition-all hover:scale-105 hover:shadow-xl" data-feature="snake">
                <div class="w-16 h-16 bg-secondary/20 rounded-full flex items-center justify-center mx-auto mb-3">
                    <!-- 内联SVG替代Font Awesome -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 512 512" class="text-secondary">
                        <path fill="currentColor" d="M441.7 97.6c9.4 7.4 24.6 5.8 32-3.6s5.8-24.6-3.6-32c-124.7-99.7-315.7-99.7-440.4 0C12.2 60 10.7 75.1 19.2 82.6s24.6 5.8 32-3.6C103.7 44.8 202.5 32 256 32s152.3 12.8 204.8 56.1c8.3 9.4 22.6 11 32 3.6zM496 288H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h80v64H96c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16h-16v-64h80v64h-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16h-16v-64h80v64h-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16h-16v-64h80c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16z"/>
                    </svg>
                </div>
                <h3 class="font-bold text-lg mb-1">贪吃蛇大作战</h3>
                <p class="text-sm text-gray-500">输了的洗碗！</p>
            </div>
            
            <!-- 功能卡片2：运势占卜 -->
            <div class="feature-card bg-white rounded-2xl shadow-lg p-5 text-center cursor-pointer transform transition-all hover:scale-105 hover:shadow-xl" data-feature="fortune">
                <div class="w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mx-auto mb-3">
                    <!-- 内联SVG替代Font Awesome -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 512 512" class="text-accent">
                        <path fill="currentColor" d="M460.1 32.1c-3.8-1.7-8.1-1.7-11.9 0L312 82.7V32c0-8.8-7.2-16-16-16s-16 7.2-16 16v50.7L63.8 32.1c-3.8-1.7-8.1-1.7-11.9 0s-1.7 8.1 0 11.9L232 176.6V480c0 8.8 7.2 16 16 16s16-7.2 16-16V176.6l180.1-132.6c1.7-3.8 1.7-8.1 0-11.9z"/>
                    </svg>
                </div>
                <h3 class="font-bold text-lg mb-1">今日运势</h3>
                <p class="text-sm text-gray-500">不准不要钱！</p>
            </div>
            
            <!-- 功能卡片3：奇怪任务 -->
            <div class="feature-card bg-white rounded-2xl shadow-lg p-5 text-center cursor-pointer transform transition-all hover:scale-105 hover:shadow-xl" data-feature="tasks">
                <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-3">
                    <!-- 内联SVG替代Font Awesome -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 512 512" class="text-primary">
                        <path fill="currentColor" d="M16 32c17.7 0 32 14.3 32 32v32h48V64c0-17.7 14.3-32 32-32s32 14.3 32 32v32h48V64c0-17.7 14.3-32 32-32s32 14.3 32 32v32h48V64c0-17.7 14.3-32 32-32s32 14.3 32 32v32h48V64c0-17.7 14.3-32 32-32s32 14.3 32 32v224c0 17.7-14.3 32-32 32s-32-14.3-32-32V128H416v160c0 17.7-14.3 32-32 32s-32-14.3-32-32V128H320v160c0 17.7-14.3 32-32 32s-32-14.3-32-32V128H224v160c0 17.7-14.3 32-32 32s-32-14.3-32-32V128H128v160c0 17.7-14.3 32-32 32s-32-14.3-32-32V128H48v160c0 17.7-14.3 32-32 32s-32-14.3-32-32V64c0-17.7 14.3-32 32-32zm416 384H64c-17.7 0-32 14.3-32 32s14.3 32 32 32h368c17.7 0 32-14.3 32-32s-14.3-32-32-32z"/>
                    </svg>
                </div>
                <h3 class="font-bold text-lg mb-1">猪之任务生成器</h3>
                <p class="text-sm text-gray-500">敢不敢接招？</p>
            </div>
            
            <!-- 功能卡片4：早饭选择 -->
            <div class="feature-card bg-white rounded-2xl shadow-lg p-5 text-center cursor-pointer transform transition-all hover:scale-105 hover:shadow-xl" data-feature="breakfast">
                <div class="w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-3">
                    <!-- 内联SVG替代Font Awesome -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 512 512" class="text-green-500">
                        <path fill="currentColor" d="M496 384c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H464c17.7 0 32 14.3 32 32zM96 128H32C14.3 128 0 142.3 0 160v64c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32zm0 256H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64c17.7 0 32-14.3 32-32s-14.3-32-32-32zm128-288H160c-17.7 0-32 14.3-32 32v224c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32zm0 256H160c-17.7 0-32 14.3-32 32s14.3 32 32 32h64c17.7 0 32-14.3 32-32s-14.3-32-32-32zm128-192H288c-17.7 0-32 14.3-32 32v160c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zm0 256H288c-17.7 0-32 14.3-32 32s14.3 32 32 32h64c17.7 0 32-14.3 32-32s-14.3-32-32-32zm128-192H416c-17.7 0-32 14.3-32 32v160c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32z"/>
                    </svg>
                </div>
                <h3 class="font-bold text-lg mb-1">早餐吃什么</h3>
                <p class="text-sm text-gray-500">选择困难症救星</p>
            </div>
        </div>
        

        
        <!-- 1. 贪吃蛇游戏 -->
        <div id="snake-feature" class="hidden fade-in-fast">
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-6 relative overflow-hidden">
                <!-- 装饰元素 -->
                <div class="absolute -top-8 -right-8 w-32 h-32 bg-secondary/10 rounded-full"></div>
                
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-secondary flex items-center">
                        <svg class="w-6 h-6 mr-2 inline" viewBox="0 0 24 24" fill="currentColor"><path d="M15 7H9v10h6V7zm-4 8H7V9h4v6zm8-8h-2v10h2V7zm-2 8h-2V9h2v6zm2-10H7v14h12V5z"></path></svg> 贪吃蛇大作战
                    </h2>
                    <!-- 专门优化的返回按钮 -->
                    <button 
                        id="snake-back-btn" 
                        class="back-btn bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full text-sm transition-all" 
                        style="position: relative; z-index: 9999; display: block; width: auto; height: auto;" 
                        onclick="console.log('返回按钮直接点击'); goToMainMenu(); return false;"
                    >
                        <svg class="w-4 h-4 mr-1" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
                        </svg> 返回
                    </button>
                </div>
                

                
                <div class="text-center mb-4">
                    <p class="text-gray-600 mb-3">游戏规则：吃到食物变长，撞到墙或自己会死，吃到炸弹会变短！</p>
                    <p class="text-red-500 text-sm mb-4">输的人负责洗碗三天！敢不敢玩？</p>
                    
                    <div class="flex justify-center gap-4 mb-4">
                        <div class="bg-gray-100 px-3 py-1 rounded-full">
                            <span class="text-sm">分数: <span id="snake-score" class="font-bold">0</span></span>
                        </div>
                        <div class="bg-gray-100 px-3 py-1 rounded-full">
                            <span class="text-sm">长度: <span id="snake-length" class="font-bold">1</span></span>
                        </div>
                    </div>
                    
                    <!-- 游戏区域 -->
                    <div id="snake-game" class="mb-4">
                        <table id="snake-board"></table>
                    </div>
                    
                    <!-- 控制按钮（适合触屏） -->
                    <div class="snake-controls mt-6 max-w-xs mx-auto">
                        <div class="flex justify-center mb-2">
                            <button class="snake-btn bg-secondary/20 hover:bg-secondary/40 w-14 h-14 rounded-full flex items-center justify-center" data-direction="up">
                                        <svg class="w-8 h-8 text-secondary" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
                                        </svg>
                                    </button>
                        </div>
                        <div class="flex justify-center gap-2">
                            <button class="snake-btn bg-secondary/20 hover:bg-secondary/40 w-14 h-14 rounded-full flex items-center justify-center" data-direction="left">
                                        <svg class="w-8 h-8 text-secondary" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                                        </svg>
                                    </button>
                            <button class="snake-btn bg-secondary/20 hover:bg-secondary/40 w-14 h-14 rounded-full flex items-center justify-center" data-direction="down">
                                        <svg class="w-8 h-8 text-secondary" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M7.41 7.41L12 12l4.59-4.59L18 9l-6 6-6-6 1.41-1.59z"/>
                                        </svg>
                                    </button>
                            <button class="snake-btn bg-secondary/20 hover:bg-secondary/40 w-14 h-14 rounded-full flex items-center justify-center" data-direction="right">
                                        <svg class="w-8 h-8 text-secondary" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/>
                                        </svg>
                                    </button>
                        </div>
                    </div>
                    
                    <!-- 游戏控制 -->
                    <div class="mt-6 flex justify-center gap-3">
                        <button id="start-snake" class="bg-secondary hover:bg-secondary/90 text-white px-5 py-2 rounded-full text-sm transition-all">
                            <svg class="w-4 h-4 mr-1" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M10.804 8L5 4.633v6.734L10.804 8z" fill-rule="evenodd"/>
                            </svg> 开始游戏
                        </button>
                        <button id="pause-snake" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-5 py-2 rounded-full text-sm transition-all" disabled>
                            <svg class="w-4 h-4 mr-1" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M6 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0v-8a.5.5 0 0 1 .5-.5zm4 0a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0v-8a.5.5 0 0 1 .5-.5z"/>
                            </svg> 暂停
                        </button>
                        <button id="reset-snake" class="bg-primary hover:bg-primary/90 text-white px-5 py-2 rounded-full text-sm transition-all">
                            <svg class="w-4 h-4 mr-1" viewBox="0 0 16 16" fill="currentColor">
                                <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                                <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                            </svg> 重新开始
                        </button>
                    </div>
                    
                    <!-- 游戏结束弹窗 -->
                    <div id="snake-over" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 hidden fade-in-fast">
                        <div class="bg-white rounded-2xl p-6 max-w-sm w-full text-center pop-big">
                            <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <svg class="w-12 h-12 text-red-500" viewBox="0 0 16 16" fill="currentColor">
                                    <circle cx="8" cy="8" r="8" fill="currentColor"/>
                                    <path d="M6 5.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1zm3 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold mb-2">游戏结束！</h3>
                            <p class="text-gray-600 mb-4">你的分数: <span id="final-score" class="font-bold">0</span></p>
                            <p class="text-red-500 mb-6 text-sm">愿赌服输，下次你洗碗～</p>
                            <div class="flex flex-col gap-3">
                        <button id="restart-snake" class="bg-secondary hover:bg-secondary/90 text-white px-6 py-2 rounded-full transition-all w-full">
                            再来一局
                        </button>
                        <button id="close-snake" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-2 rounded-full transition-all w-full">
                            关闭
                        </button>
                    </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 2. 运势占卜 -->
        <div id="fortune-feature" class="hidden fade-in-fast">
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-6 relative overflow-hidden">
                <!-- 装饰元素 -->
                <div class="absolute -bottom-10 -left-10 w-32 h-32 bg-accent/10 rounded-full"></div>
                
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-accent flex items-center">
                        <svg class="w-6 h-6 mr-2" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                            <path fill-rule="evenodd" d="M16 8c0 3.866-3.582 7-8 7a8.841 8.841 0 0 1-4.038-.948.531.531 0 0 1-.622-.283.518.518 0 0 1-.054-.629A8.018 8.018 0 0 1 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zm-8 3c3.314 0 6-2.686 6-6s-2.686-6-6-6-6 2.686-6 6 2.686 6 6 6z"/>
                        </svg> 今日运势占卜
                    </h2>
                    <button class="back-btn bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-sm transition-all">
                        <svg class="w-4 h-4 mr-1" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
                        </svg> 返回
                    </button>
                </div>
                
                <div class="text-center">
                    <div class="w-32 h-32 bg-accent/20 rounded-full flex items-center justify-center mx-auto mb-6 relative">
                        <svg class="w-10 h-10 text-accent float-random" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288l1.847-3.658 1.846 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.505.505 0 0 0-.461 0z"/>
                        </svg>
                        <div class="absolute inset-0 border-4 border-dashed border-accent/30 rounded-full animate-spin-slow"></div>
                    </div>
                    
                    <p class="mb-6 text-gray-600">想知道今天的运势吗？<br>点击下方按钮，让宇宙给你答案！</p>
                    
                    <button id="divine-btn" class="bg-accent hover:bg-accent/90 text-dark px-8 py-3 rounded-full text-lg font-bold shadow-lg transition-all transform hover:scale-105 active:scale-95 mb-8">
                        <svg class="w-5 h-5 mr-2" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M13.854 3.646a.5.5 0 0 1 0 .708L8.707 9l5.147 5.146a.5.5 0 0 1-.708.708l-5.5-5.5a.5.5 0 0 1 0-.708l5.5-5.5a.5.5 0 0 1 .708 0z"/>
                            <path d="M8 2.5a.5.5 0 0 1 .5.5v4.303l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 7.303V3a.5.5 0 0 1 .5-.5z"/>
                        </svg> 开始占卜
                    </button>
                    
                    <!-- 运势结果 -->
                    <div id="fortune-result" class="hidden">
                        <div class="bg-gray-50 rounded-xl p-6 mb-6 pop-big">
                            <h3 class="text-xl font-bold mb-3 text-accent" id="fortune-title">超好运日！</h3>
                            <p class="text-gray-700 mb-4" id="fortune-description">
                                今天猪会主动洗碗、捶背、买奶茶，并且不会顶嘴！快去命令TA做这做那吧～
                            </p>
                            <div class="flex justify-center">
                                <div class="flex" id="fortune-stars">
                                    <!-- 星星会动态生成 -->
                                </div>
                            </div>
                        </div>
                        
                        <button id="redivine-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-2 rounded-full transition-all">
                            <svg class="w-4 h-4 mr-1" viewBox="0 0 16 16" fill="currentColor">
                                <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                                <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                            </svg> 再占一次
                        </button>
                    </div>
                    
                    <!-- 占卜动画 -->
                    <div id="fortune-loading" class="hidden">
                        <div class="w-16 h-16 border-4 border-accent/30 border-t-accent rounded-full mx-auto animate-spin mb-4"></div>
                        <p class="text-gray-500">宇宙正在计算你的运势...</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 3. 奇怪任务生成器 -->
        <div id="tasks-feature" class="hidden fade-in-fast">
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-6 relative overflow-hidden">
                <!-- 装饰元素 -->
                <div class="absolute top-20 right-5 w-20 h-20 bg-primary/10 rounded-full"></div>
                
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-primary flex items-center">
                        <svg class="w-6 h-6 mr-2" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                            <path fill-rule="evenodd" d="M16 8c0 3.866-3.582 7-8 7a8.841 8.841 0 0 1-4.038-.948.531.531 0 0 1-.622-.283.518.518 0 0 1-.054-.629A8.018 8.018 0 0 1 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zm-8 3c3.314 0 6-2.686 6-6s-2.686-6-6-6-6 2.686-6 6 2.686 6 6 6z"/>
                        </svg> 猪之任务生成器
                    </h2>
                    <button class="back-btn bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-sm transition-all">
                        <svg class="w-4 h-4 mr-1" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
                        </svg> 返回
                    </button>
                </div>
                
                <div class="text-center">
                    <p class="mb-6 text-gray-600">生成一个让对方做的"好事"，<br>不做就要接受惩罚哦！</p>
                    
                    <button id="generate-task-btn" class="bg-primary hover:bg-primary/90 text-white px-8 py-3 rounded-full text-lg font-bold shadow-lg transition-all transform hover:scale-105 active:scale-95 mb-6">
                        <svg class="w-5 h-5 mr-2" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M9.5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0 0a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0v-1a.5.5 0 0 1 .5-.5zm2.22-4.22a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L8.5 10.293l2.646-2.647a.5.5 0 0 1 .708 0zm-10 4.22a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L3.707 9.5l2.646 2.647a.5.5 0 0 1-.708.708l-3-3z"/>
                        </svg> 生成任务
                    </button>
                    
                    <!-- 任务卡片 -->
                    <div id="task-card" class="bg-primary/5 rounded-2xl p-6 min-h-[180px] flex items-center justify-center hidden mb-6">
                        <p id="task-text" class="text-xl text-gray-800 leading-relaxed">
                            点击上面的按钮，生成你的专属任务～
                        </p>
                    </div>
                    
                    <!-- 操作按钮 -->
                    <div id="task-actions" class="flex justify-center gap-4 mt-6 hidden">
                        <button id="accept-task-btn" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-full transition-all">
                            <svg class="w-4 h-4 mr-1" viewBox="0 0 16 16" fill="currentColor">
                                <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                            </svg> 接受
                        </button>
                        <button id="reject-task-btn" class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-full transition-all">
                            <svg class="w-4 h-4 mr-1" viewBox="0 0 16 16" fill="currentColor">
                                <path fill-rule="evenodd" d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                            </svg> 拒绝
                        </button>
                        <button id="new-task-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-2 rounded-full transition-all">
                            <svg class="w-4 h-4 mr-1" viewBox="0 0 16 16" fill="currentColor">
                                <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                                <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                            </svg> 换一个
                        </button>
                    </div>
                    
                    <!-- 任务反馈 -->
                    <div id="task-feedback" class="mt-6 text-center hidden"></div>
                    
                    <!-- 任务历史 -->
                    <div class="mt-8">
                        <h3 class="text-lg font-bold mb-3 flex items-center justify-center">
                            <svg class="w-5 h-5 text-gray-500 mr-2" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8.5 0a.5.5 0 0 1 .5.5v1.5H14a.5.5 0 0 1 0 1H9v1.5a.5.5 0 0 1-1 0V3H2a.5.5 0 0 1 0-1h6V.5a.5.5 0 0 1 .5-.5zm5.75 15H2a1.5 1.5 0 0 1-1.5-1.5v-7A1.5 1.5 0 0 1 2 5h12a1.5 1.5 0 0 1 1.5 1.5v7a1.5 1.5 0 0 1-1.5 1.5zm-2 0a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5h-11a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h11z"/>
                            </svg> 任务历史
                        </h3>
                        <div id="tasks-history" class="space-y-2 max-h-[150px] overflow-y-auto pr-2 text-sm">
                            <div class="bg-gray-50 p-2 rounded text-gray-600">
                                <svg class="w-4 h-4 text-green-500 mr-1 inline" viewBox="0 0 16 16" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                                </svg> 学猫叫3声并摇尾巴
                            </div>
                            <div class="bg-gray-50 p-2 rounded text-gray-600">
                                <svg class="w-4 h-4 text-red-500 mr-1 inline" viewBox="0 0 16 16" fill="currentColor">
                                    <path fill-rule="evenodd" d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                                </svg> 给对方洗袜子（拒绝）
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 4. 早饭吃什么 -->
        <div id="breakfast-feature" class="hidden fade-in-fast">
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-6 relative overflow-hidden">
                <!-- 装饰元素 -->
                <div class="absolute -top-6 -left-6 w-24 h-24 bg-green-500/10 rounded-full"></div>
                
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-green-500 flex items-center">
                        <svg class="w-6 h-6 mr-2 inline" viewBox="0 0 24 24" fill="currentColor"><path d="M16 7.08c0 1.77-.84 3.25-2 4.12V21h-2V11.2c-1.16-.87-2-2.35-2-4.12 0-2.21 1.79-4 4-4s4 1.79 4 4zM12 2C9.24 2 7 4.24 7 7s2.24 5 5 5 5-2.24 5-5S14.76 2 12 2zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm-9 9H3v6c0 1.1.9 2 2 2h4v-8H6v-2c0-2.21 1.79-4 4-4h4c.44 0 .8.06 1.15.15.13.03.25.05.38.08l1.46-1.46c-.37-.27-.8-.49-1.29-.62C15.87 6.09 14.06 5 12 5H6c-3.31 0-6 2.69-6 6v1z"></path></svg> 早餐吃什么
                    </h2>
                    <button class="back-btn bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-sm transition-all">
                        <svg class="w-5 h-5 mr-1 inline" viewBox="0 0 24 24" fill="currentColor"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg> 返回
                    </button>
                </div>
                
                <div class="text-center">
                    <p class="mb-6 text-gray-600">选择困难症？<br>让系统帮你决定今天吃什么！</p>
                    
                    <!-- 食物转盘 -->
                    <div class="relative w-64 h-64 mx-auto mb-8">
                        <div id="food-wheel" class="w-full h-full rounded-full border-8 border-green-500 overflow-hidden relative transition-all duration-500">
                            <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                                <div class="w-16 h-16 bg-white rounded-full z-10 shadow-md flex items-center justify-center">
                                    <svg class="w-8 h-8 text-green-500" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M11.375 9.724l3.25 2.437 1.5-2.001a.374.374 0 0 1 .599.249v5.65c0 .414-.524.645-.845.38l-3.5-2.626-3.5 2.626a.375.375 0 0 1-.6-.249v-5.65a.375.375 0 0 1 .599-.249l1.5 2.001 3.25-2.437a.375.375 0 0 1 .251-.062zm7.212-4.479a.375.375 0 0 1 .375.375V12.2c0 .414-.524.645-.845.38L16.5 11l-1.612 1.58a.375.375 0 0 1-.6-.249V5.62a.375.375 0 0 1 .375-.374h3.637zm-15.75 0A.375.375 0 0 1 3 .818V12.2a.375.375 0 0 1-.6.249L1.5 11l-1.612 1.58A.374.374 0 0 1 0 12.2V.818a.375.375 0 0 1 .375-.375h3.637z"/>
                                    </svg>
                                </div>
                            </div>
                            <div id="wheel-inner" class="w-full h-full">
                                <!-- 转盘内容会动态生成 -->
                            </div>
                        </div>
                        <div class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-6 h-6 bg-red-500 rounded-full z-20"></div>
                    </div>
                    
                    <button id="spin-wheel-btn" class="bg-accent hover:bg-accent/90 text-dark px-8 py-3 rounded-full text-lg font-bold shadow-lg transition-all transform hover:scale-105 active:scale-95 mb-6">
                        <svg class="w-5 h-5 mr-2" viewBox="0 0 16 16" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                        </svg> 开始转盘
                    </button>
                    
                    <!-- 结果显示 -->
                    <div id="food-result" class="hidden mb-6">
                        <div class="bg-green-50 rounded-xl p-5 pop-big">
                            <h3 class="text-xl font-bold text-green-600 mb-2" id="result-food">小笼包</h3>
                            <p class="text-gray-600" id="result-description">
                                今天就吃小笼包吧！记得加醋，美味加倍～ 谁去买？石头剪刀布决定！
                            </p>
                        </div>
                    </div>
                    
                    <!-- 自定义选项 -->
                    <div class="mt-8">
                        <h3 class="text-lg font-bold mb-3">添加想吃的早餐</h3>
                        <div class="flex gap-2">
                            <input type="text" id="new-food" placeholder="比如：豆浆油条" class="flex-1 border border-gray-300 rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500">
                            <button id="add-food-btn" class="bg-green-100 hover:bg-green-200 text-green-700 px-4 py-2 rounded-full transition-all">
                                <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 页脚彩蛋 -->
        <footer class="text-center text-gray-500 text-sm mt-8 pb-6">
            <p>本工具最终解释权归毛所有 <svg class="w-5 h-5 text-primary inline" viewBox="0 0 24 24" fill="currentColor"><path d="M18.65 13.15C17.62 14.65 16.34 15.76 14.8 16.33c-.75.27-1.54.4-2.35.4s-1.6-.13-2.35-.4c-1.54-.57-2.82-1.68-3.85-3.18l4.14-4.14c.3-.3.77-.3 1.06 0l5.5 5.5c.3.3.3.77 0 1.06zM12 4c-4.41 0-8 3.59-8 8s3.59 8 8 8c2.05 0 3.94-.67 5.5-1.81l-1.41-1.41c-1.21.81-2.59 1.31-4.09 1.31-3.31 0-6-2.69-6-6s2.69-6 6-6c1.5 0 2.88.5 4.09 1.31l1.41-1.41C15.94 4.67 14.05 4 12 4z"></path></svg></p>
            <p class="mt-2">哈基米毛毛大人<button id="secret-easter-egg" class="text-xs text-gray-400 bg-transparent border-none cursor-pointer hover:text-primary">（偷偷点我）</button></p>
        </footer>
    </div>

    <script>
        // 全局变量
        let currentFeature = null;
        let snakeGame = null;
        let wheelSpinning = false;
        
        // DOM元素
        const mainMenu = document.getElementById('main-menu');
        const features = {
            snake: document.getElementById('snake-feature'),
            fortune: document.getElementById('fortune-feature'),
            tasks: document.getElementById('tasks-feature'),
            breakfast: document.getElementById('breakfast-feature')
        };
        const soundEffect = document.getElementById('sound-effect');
        const soundText = document.getElementById('sound-text');
        const secretEasterEgg = document.getElementById('secret-easter-egg');
        
        // 显示音效提示
        function showSound(text) {
            soundText.textContent = text;
            soundEffect.classList.remove('hidden');
            setTimeout(() => {
                soundEffect.classList.add('hidden');
            }, 1000);
        }
        
        // 切换功能
        function switchFeature(featureName) {
            // 隐藏所有功能
            Object.values(features).forEach(el => {
                if (el) el.classList.add('hidden');
            });
            
            // 显示选中功能
            if (features[featureName]) {
                features[featureName].classList.remove('hidden');
                currentFeature = featureName;
                
                // 特殊初始化
                if (featureName === 'snake' && !snakeGame) {
                    initSnakeGame();
                } else if (featureName === 'breakfast' && !wheelSpinning) {
                    initFoodWheel();
                }
                
                // 绑定返回按钮事件
                setTimeout(() => {
                    bindBackButtons();
                }, 50);
            }
            
            showSound(`进入${getFeatureName(featureName)}！`);
        }
        
        // 获取功能名称
        function getFeatureName(feature) {
            const names = {
                snake: '贪吃蛇',
                fortune: '运势占卜',
                tasks: '互怼任务',
                breakfast: '早餐选择'
            };
            return names[feature] || feature;
        }
        
        // 返回主菜单
        function goToMainMenu() {
            // 暂停所有可能的游戏/动画
            if (snakeGame && snakeGame.running) {
                snakeGame.pause();
                const pauseBtn = document.getElementById('pause-snake');
                const startBtn = document.getElementById('start-snake');
                if (pauseBtn) pauseBtn.disabled = false;
                if (startBtn) startBtn.disabled = true;
            }
            
            // 隐藏所有功能，显示主菜单
            Object.values(features).forEach(el => {
                if (el) el.classList.add('hidden');
            });
            if (mainMenu) mainMenu.classList.remove('hidden');
            currentFeature = null;
            
            showSound('返回主菜单！');
        }
        
        // 修复贪吃蛇返回按钮特殊问题
        function fixSnakeBackButton() {
            // 专门针对贪吃蛇功能的返回按钮进行基本设置
            const snakeBackBtn = document.getElementById('snake-back-btn');
            if (snakeBackBtn) {
                // 确保按钮可见且可点击
                snakeBackBtn.style.display = 'block';
                snakeBackBtn.style.visibility = 'visible';
                snakeBackBtn.style.opacity = '1';
                snakeBackBtn.style.pointerEvents = 'auto';
            }
        }
        
        // 绑定所有返回按钮事件
        function bindBackButtons() {
            // 为所有返回按钮添加点击事件
            document.querySelectorAll('.back-btn').forEach(btn => {
                // 确保按钮可见且可点击
                btn.style.display = 'block';
                btn.style.visibility = 'visible';
                btn.style.opacity = '1';
                btn.style.pointerEvents = 'auto';
                btn.style.cursor = 'pointer';
                
                // 添加点击事件
                btn.addEventListener('click', function(e) {
                    goToMainMenu();
                    e.stopPropagation();
                });
            });
        }
        
        // 主菜单点击事件
        document.querySelectorAll('.feature-card').forEach(card => {
            card.addEventListener('click', () => {
                const feature = card.getAttribute('data-feature');
                mainMenu.classList.add('hidden');
                switchFeature(feature);
            });
        });
        
        // 1. 贪吃蛇游戏实现
        function initSnakeGame() {
            const boardEl = document.getElementById('snake-board');
            const scoreEl = document.getElementById('snake-score');
            const lengthEl = document.getElementById('snake-length');
            const startBtn = document.getElementById('start-snake');
            const pauseBtn = document.getElementById('pause-snake');
            const restartBtn = document.getElementById('restart-snake');
            const closeBtn = document.getElementById('close-snake');
            const gameOverEl = document.getElementById('snake-over');
            const finalScoreEl = document.getElementById('final-score');
            
            // 游戏配置
            const config = {
                rows: 20,
                cols: 20,
                initialSpeed: 200,
                speedIncrease: 5
            };
            
            // 创建游戏板
            function createBoard() {
                boardEl.innerHTML = '';
                for (let y = 0; y < config.rows; y++) {
                    const row = document.createElement('tr');
                    for (let x = 0; x < config.cols; x++) {
                        const cell = document.createElement('td');
                        cell.id = `cell-${x}-${y}`;
                        row.appendChild(cell);
                    }
                    boardEl.appendChild(row);
                }
            }
            
            // 游戏状态
            let state = {
                snake: [{x: 10, y: 10}],
                direction: 'right',
                nextDirection: 'right',
                food: {x: 5, y: 10},
                bomb: null,
                score: 0,
                speed: config.initialSpeed,
                running: false,
                timer: null
            };
            
            // 渲染游戏
            function render() {
                // 清空所有单元格
                document.querySelectorAll('#snake-board td').forEach(cell => {
                    cell.className = '';
                });
                
                // 渲染蛇头
                const head = state.snake[0];
                document.getElementById(`cell-${head.x}-${head.y}`).className = 'snake-head';
                
                // 渲染蛇身
                for (let i = 1; i < state.snake.length; i++) {
                    const segment = state.snake[i];
                    document.getElementById(`cell-${segment.x}-${segment.y}`).className = 'snake-body';
                }
                
                // 渲染食物
                document.getElementById(`cell-${state.food.x}-${state.food.y}`).className = 'snake-food';
                
                // 渲染炸弹（偶尔出现）
                if (state.bomb) {
                    document.getElementById(`cell-${state.bomb.x}-${state.bomb.y}`).className = 'snake-bomb';
                }
                
                // 更新分数
                scoreEl.textContent = state.score;
                lengthEl.textContent = state.snake.length;
            }
            
            // 生成新食物
            function generateFood() {
                let newFood;
                do {
                    newFood = {
                        x: Math.floor(Math.random() * config.cols),
                        y: Math.floor(Math.random() * config.rows)
                    };
                } while (
                    state.snake.some(segment => segment.x === newFood.x && segment.y === newFood.y) ||
                    (state.bomb && state.bomb.x === newFood.x && state.bomb.y === newFood.y)
                );
                
                state.food = newFood;
                
                // 10%概率生成炸弹
                if (Math.random() < 0.1 && !state.bomb) {
                    generateBomb();
                } else if (state.bomb && Math.random() < 0.3) {
                    // 30%概率移除已有的炸弹
                    state.bomb = null;
                }
            }
            
            // 生成炸弹
            function generateBomb() {
                let newBomb;
                do {
                    newBomb = {
                        x: Math.floor(Math.random() * config.cols),
                        y: Math.floor(Math.random() * config.rows)
                    };
                } while (
                    state.snake.some(segment => segment.x === newBomb.x && segment.y === newBomb.y) ||
                    (state.food.x === newBomb.x && state.food.y === newBomb.y)
                );
                
                state.bomb = newBomb;
                
                // 5秒后自动消失
                setTimeout(() => {
                    if (state.bomb && state.running) {
                        state.bomb = null;
                        render();
                    }
                }, 5000);
            }
            
            // 移动蛇
            function move() {
                if (!state.running) return;
                
                // 更新方向
                state.direction = state.nextDirection;
                
                // 创建新头部
                const head = {...state.snake[0]};
                switch (state.direction) {
                    case 'up': head.y--; break;
                    case 'down': head.y++; break;
                    case 'left': head.x--; break;
                    case 'right': head.x++; break;
                }
                
                // 碰撞检测（墙）
                if (head.x < 0 || head.x >= config.cols || head.y < 0 || head.y >= config.rows) {
                    gameOver();
                    return;
                }
                
                // 碰撞检测（自己）
                if (state.snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                    gameOver();
                    return;
                }
                
                // 添加新头部
                state.snake.unshift(head);
                
                // 检测是否吃到食物
                if (head.x === state.food.x && head.y === state.food.y) {
                    state.score += 10;
                    state.speed = Math.max(50, config.initialSpeed - (state.score / 10) * config.speedIncrease);
                    generateFood();
                    showSound('好吃！');
                    
                    // 每吃5个食物加速提示
                    if (state.snake.length % 5 === 0) {
                        showSound('速度变快啦！');
                    }
                } 
                // 检测是否吃到炸弹
                else if (state.bomb && head.x === state.bomb.x && head.y === state.bomb.y) {
                    state.score = Math.max(0, state.score - 5);
                    state.bomb = null;
                    
                    // 缩短蛇身
                    if (state.snake.length > 3) {
                        state.snake.pop();
                        state.snake.pop();
                        state.snake.pop();
                    } else if (state.snake.length > 1) {
                        state.snake.pop();
                    }
                    
                    showSound('哎呀！吃到炸弹了！');
                    generateFood();
                }
                // 没吃到食物，移除尾部
                else {
                    state.snake.pop();
                }
                
                // 渲染并设置下一次移动
                render();
                state.timer = setTimeout(move, state.speed);
            }
            
            // 开始游戏
            function startGame() {
                if (state.running) return;
                
                state.running = true;
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                showSound('游戏开始！');
                move();
            }
            
            // 暂停游戏
            function pauseGame() {
                if (!state.running) return;
                
                state.running = false;
                clearTimeout(state.timer);
                startBtn.disabled = false;
                pauseBtn.disabled = true;
                showSound('游戏暂停');
            }
            
            // 游戏结束
            function gameOver() {
                state.running = false;
                clearTimeout(state.timer);
                finalScoreEl.textContent = state.score;
                gameOverEl.classList.remove('hidden');
                showSound('游戏结束！洗碗去！');
            }
            
            // 重置游戏
            function resetGame() {
                state = {
                    snake: [{x: 10, y: 10}],
                    direction: 'right',
                    nextDirection: 'right',
                    food: {x: 5, y: 10},
                    bomb: null,
                    score: 0,
                    speed: config.initialSpeed,
                    running: false,
                    timer: null
                };
                gameOverEl.classList.add('hidden');
                startBtn.disabled = false;
                pauseBtn.disabled = true;
                generateFood();
                render();
            }
            
            // 方向控制
            function setDirection(direction) {
                // 防止180度转向
                if (
                    (state.direction === 'up' && direction === 'down') ||
                    (state.direction === 'down' && direction === 'up') ||
                    (state.direction === 'left' && direction === 'right') ||
                    (state.direction === 'right' && direction === 'left')
                ) {
                    return;
                }
                state.nextDirection = direction;
            }
            
            // 事件监听
            startBtn.addEventListener('click', startGame);
            pauseBtn.addEventListener('click', pauseGame);
            restartBtn.addEventListener('click', resetGame);
            document.getElementById('reset-snake').addEventListener('click', resetGame);
            closeBtn.addEventListener('click', () => {
                gameOverEl.classList.add('hidden');
            });
            
            // 键盘控制
            document.addEventListener('keydown', (e) => {
                switch (e.key) {
                    case 'ArrowUp': setDirection('up'); break;
                    case 'ArrowDown': setDirection('down'); break;
                    case 'ArrowLeft': setDirection('left'); break;
                    case 'ArrowRight': setDirection('right'); break;
                    case ' ': // 空格暂停/继续
                        state.running ? pauseGame() : startGame();
                        break;
                }
            });
            
            // 触屏控制
            document.querySelectorAll('.snake-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const direction = btn.getAttribute('data-direction');
                    setDirection(direction);
                });
            });
            
            // 初始化
            createBoard();
            generateFood();
            render();
            
            // 暴露游戏控制方法
            snakeGame = {
                start: startGame,
                pause: pauseGame,
                reset: resetGame,
                get running() { return state.running; }
            };
        }
        
        // 2. 运势占卜实现
        function initFortuneTeller() {
            const divineBtn = document.getElementById('divine-btn');
            const redivineBtn = document.getElementById('redivine-btn');
            const resultEl = document.getElementById('fortune-result');
            const loadingEl = document.getElementById('fortune-loading');
            const titleEl = document.getElementById('fortune-title');
            const descEl = document.getElementById('fortune-description');
            const starsEl = document.getElementById('fortune-stars');
            
            // 运势数据
            const fortunes = [
                {
                    title: "大吉！",
                    description: "今天你会遇到会说话的猫!",
                    stars: 5
                },
                {
                    title: "中吉",
                    description: "今天穿袜子会给你带来好运!",
                    stars: 4
                },
                {
                    title: "小吉",
                    description: "下午3点会有神秘人请你喝奶茶",
                    stars: 3
                },
                {
                    title: "末吉",
                    description: "今天有人正在偷偷计划惊喜",
                    stars: 3
                },
                {
                    title: "小凶",
                    description: "虽然是小xiong但是也很软！",
                    stars: 6
                },
                {
                    title: "中凶",
                    description: "今天可能会消化不良，请使用人类慢食碗进食！",
                    stars: 1
                },
                {
                    title: "大凶",
                    description: "但没关系，反着看就是大吉!",
                    stars: 5
                }
            ];
            
            // 生成星星
            function generateStars(count) {
                starsEl.innerHTML = '';
                for (let i = 0; i < 5; i++) {
                    const star = document.createElement('div');
                    star.className = `flex items-center justify-center ${i < count ? '' : 'opacity-30'}`;
                    star.innerHTML = `
                        <svg class="w-5 h-5 text-accent" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                        </svg>
                    `;
                    starsEl.appendChild(star);
                }
            }
            
            // 占卜
            function divine() {
                resultEl.classList.add('hidden');
                loadingEl.classList.remove('hidden');
                divineBtn.disabled = true;
                
                showSound('占卜中...');
                
                // 模拟加载时间
                setTimeout(() => {
                    const randomFortune = fortunes[Math.floor(Math.random() * fortunes.length)];
                    titleEl.textContent = randomFortune.title;
                    descEl.textContent = randomFortune.description;
                    generateStars(randomFortune.stars);
                    
                    loadingEl.classList.add('hidden');
                    resultEl.classList.remove('hidden');
                    divineBtn.disabled = false;
                    
                    showSound('占卜完成！');
                }, 2000);
            }
            
            // 事件监听
            divineBtn.addEventListener('click', divine);
            redivineBtn.addEventListener('click', divine);
        }
        
        // 初始化运势占卜
        initFortuneTeller();
        
        // 3. 奇怪任务生成器实现
        function initTaskGenerator() {
            const generateBtn = document.getElementById('generate-task-btn');
            const newTaskBtn = document.getElementById('new-task-btn');
            const acceptBtn = document.getElementById('accept-task-btn');
            const rejectBtn = document.getElementById('reject-task-btn');
            const taskCard = document.getElementById('task-card');
            const taskText = document.getElementById('task-text');
            const taskActions = document.getElementById('task-actions');
            const taskFeedback = document.getElementById('task-feedback');
            const tasksHistory = document.getElementById('tasks-history');
            
            // 任务列表
            const tasks = [
                "学小狗叫3声，还要摇一下尾巴（必须有动作）",
                "给对方洗一次袜子，并且要边洗边夸袜子香",
                "连续说10句夸对方的话，不能重复，否则重来",
                "模仿对方最常说的一句话，要惟妙惟肖",
                "把对方的照片设为手机壁纸，保持至少3天",
                "给对方按摩10分钟，手法不好会被打",
                "唱一首跑调的情歌给对方听，必须唱完",
                "说出对方3个优点和1个缺点（缺点要委婉）",
                "下次见面主动带一份对方爱吃的零食",
                "答应对方一个合理的要求，不能反悔",
                "在朋友圈发一张对方的丑照（3分钟后可删）",
                "学猫咪撒娇，说'求求你啦'，持续10秒",
                "给对方取3个可爱的外号，并且要解释原因",
                "陪对方看一部自己不喜欢但对方喜欢的电影",
                "说出3件你偷偷为对方做过的事"
            ];
            
            // 惩罚列表
            const punishments = [
                "罚你洗一个星期的碗",
                "罚你给对方买一杯超甜奶茶",
                "罚你做20个俯卧撑",
                "罚你给对方按摩30分钟",
                "罚你承包下次约会所有费用"
            ];
            
            // 当前任务
            let currentTask = null;
            
            // 生成任务
            function generateTask() {
                taskFeedback.classList.add('hidden');
                const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
                currentTask = randomTask;
                taskText.textContent = randomTask;
                taskCard.classList.remove('hidden');
                taskActions.classList.remove('hidden');
                
                // 添加动画
                taskCard.classList.remove('pop-big');
                void taskCard.offsetWidth; // 重置动画
                taskCard.classList.add('pop-big');
                
                showSound('任务生成！');
            }
            
            // 接受任务
            function acceptTask() {
                if (!currentTask) return;
                
                taskFeedback.innerHTML = `
                    <div class="bg-green-50 text-green-700 p-3 rounded-full inline-block pop-big">
                        <svg class="w-5 h-5 mr-1 inline" viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg> 太棒了！记得履行承诺哦～
                    </div>
                `;
                taskFeedback.classList.remove('hidden');
                taskActions.classList.add('hidden');
                
                // 添加到历史
                addToHistory(currentTask, true);
                
                showSound('接受任务！');
            }
            
            // 拒绝任务
            function rejectTask() {
                if (!currentTask) return;
                
                const randomPunishment = punishments[Math.floor(Math.random() * punishments.length)];
                
                taskFeedback.innerHTML = `
                    <div class="bg-red-50 text-red-700 p-3 rounded-full inline-block pop-big">
                        <svg class="w-5 h-5 mr-1 inline" viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> 拒绝接受任务！${randomPunishment}
                    </div>
                `;
                taskFeedback.classList.remove('hidden');
                taskActions.classList.add('hidden');
                
                // 添加到历史
                addToHistory(currentTask, false);
                
                showSound('居然拒绝？');
            }
            
            // 添加到历史
            function addToHistory(task, accepted) {
                const historyItem = document.createElement('div');
                historyItem.className = 'bg-gray-50 p-2 rounded text-gray-600 slide-in';
                historyItem.innerHTML = `
                    <svg class="w-5 h-5 mr-1 ${accepted ? 'text-green-500' : 'text-red-500'}" viewBox="0 0 24 24" fill="currentColor">
                        ${accepted ? '<path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path>' : '<path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>'}
                    </svg>
                    ${task.substring(0, 20)}${task.length > 20 ? '...' : ''}
                `;
                tasksHistory.insertBefore(historyItem, tasksHistory.firstChild);
                
                // 限制历史记录数量
                if (tasksHistory.children.length > 5) {
                    tasksHistory.removeChild(tasksHistory.lastChild);
                }
            }
            
            // 事件监听
            generateBtn.addEventListener('click', generateTask);
            newTaskBtn.addEventListener('click', generateTask);
            acceptBtn.addEventListener('click', acceptTask);
            rejectBtn.addEventListener('click', rejectTask);
        }
        
        // 初始化任务生成器
        initTaskGenerator();
        
        // 4. 早饭选择器实现
        function initFoodWheel() {
            const wheelEl = document.getElementById('wheel-inner');
            const spinBtn = document.getElementById('spin-wheel-btn');
            const resultEl = document.getElementById('food-result');
            const resultFoodEl = document.getElementById('result-food');
            const resultDescEl = document.getElementById('result-description');
            const newFoodInput = document.getElementById('new-food');
            const addFoodBtn = document.getElementById('add-food-btn');
            
            // 食物列表
            let foods = [
                {name: "小笼包", color: "#FF3366", desc: "今天就吃小笼包吧！记得加醋，美味加倍～ 谁去买？石头剪刀布决定！"},
                {name: "豆浆油条", color: "#FFCC00", desc: "经典搭配豆浆油条，简单又美味。油条要趁热吃才香哦！"},
                {name: "煎饼果子", color: "#FF9900", desc: "来一套煎饼果子，加个蛋加根肠，能量满满一整天！"},
                {name: "面包牛奶", color: "#FF6699", desc: "简单的面包配牛奶，适合懒人。记得把面包烤一下更香～"},
                {name: "粥配小菜", color: "#66CC99", desc: "清淡的粥配爽口小菜，养胃又舒服。今天就吃这个吧！"},
                {name: "牛肉面", color: "#CC6633", desc: "热腾腾的牛肉面，加个煎蛋，暖心又暖胃。谁负责煮？"},
                {name: "馄饨", color: "#3399FF", desc: "鲜美馄饨配汤喝，暖和又舒服。要不要加点辣椒油？"},
                {name: "三明治", color: "#FF6666", desc: "自制三明治，健康又美味。火腿鸡蛋生菜一样不能少！"}
            ];
            
            // 创建食物转盘
            function createWheel() {
                wheelEl.innerHTML = '';
                const sliceAngle = 360 / foods.length;
                
                foods.forEach((food, index) => {
                    const slice = document.createElement('div');
                    slice.className = 'absolute inset-0';
                    slice.style.transformOrigin = '50% 50%';
                    slice.style.transform = `rotate(${index * sliceAngle}deg)`;
                    slice.style.clipPath = `polygon(50% 50%, 50% 0%, calc(50% + 50% * cos(${sliceAngle}deg * 0.01745)) calc(50% - 50% * sin(${sliceAngle}deg * 0.01745)))`;
                    slice.style.backgroundColor = food.color;
                    
                    // 添加文字
                    const text = document.createElement('div');
                    text.className = 'absolute white-space-nowrap transform origin-bottom-left';
                    text.style.left = '50%';
                    text.style.top = '0';
                    text.style.transform = `rotate(${sliceAngle/2}deg) translate(-50%, 0)`;
                    text.style.fontSize = '12px';
                    text.style.fontWeight = 'bold';
                    text.style.color = 'white';
                    text.style.paddingTop = '10px';
                    text.textContent = food.name;
                    
                    slice.appendChild(text);
                    wheelEl.appendChild(slice);
                });
            }
            
            // 旋转转盘
            function spinWheel() {
                if (wheelSpinning) return;
                
                wheelSpinning = true;
                spinBtn.disabled = true;
                spinBtn.innerHTML = '<svg class="w-5 h-5 mr-2 inline animate-spin" viewBox="0 0 24 24" fill="currentColor"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> 转动中...';
                resultEl.classList.add('hidden');
                
                showSound('转盘开始！');
                
                // 随机旋转角度（3-5圈）
                const randomAngle = 360 * (3 + Math.random() * 2) + Math.random() * 360;
                const duration = 5 + Math.random() * 2; // 5-7秒
                
                // 应用旋转
                const foodWheel = document.getElementById('food-wheel');
                foodWheel.style.transition = `transform ${duration}s cubic-bezier(0.2, 0.8, 0.2, 1)`;
                foodWheel.style.transform = `rotate(${randomAngle}deg)`;
                
                // 计算结果
                setTimeout(() => {
                    // 计算最终角度（取模360）
                    const finalAngle = randomAngle % 360;
                    const sliceAngle = 360 / foods.length;
                    const selectedIndex = Math.floor((360 - finalAngle) % 360 / sliceAngle);
                    const selectedFood = foods[selectedIndex];
                    
                    // 显示结果
                    resultFoodEl.textContent = selectedFood.name;
                    resultDescEl.textContent = selectedFood.desc;
                    resultEl.classList.remove('hidden');
                    
                    // 重置状态
                    wheelSpinning = false;
                    spinBtn.disabled = false;
                    spinBtn.innerHTML = '<svg class="w-5 h-5 mr-2 inline" viewBox="0 0 24 24" fill="currentColor"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path></svg> 开始转盘';
                    
                    showSound(`今天吃${selectedFood.name}！`);
                }, duration * 1000);
            }
            
            // 添加新食物
            function addFood() {
                const foodName = newFoodInput.value.trim();
                if (!foodName) return;
                
                // 检查是否已存在
                if (foods.some(f => f.name === foodName)) {
                    showSound('这个已经有啦！');
                    return;
                }
                
                // 随机颜色
                const randomColor = `hsl(${Math.random() * 360}, 80%, 60%)`;
                
                // 添加到列表
                foods.push({
                    name: foodName,
                    color: randomColor,
                    desc: `今天就吃${foodName}吧！听起来就很美味～ 谁去准备呢？`
                });
                
                // 更新转盘
                createWheel();
                
                // 清空输入
                newFoodInput.value = '';
                
                showSound('添加成功！');
            }
            
            // 事件监听
            spinBtn.addEventListener('click', spinWheel);
            addFoodBtn.addEventListener('click', addFood);
            newFoodInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addFood();
            });
            
            // 初始化转盘
            createWheel();
        }
        
        // 优化版彩蛋功能 - 随机显示文案或漂浮猫猫
        secretEasterEgg.addEventListener('click', () => {
            const secrets = [
                "偷偷告诉你：其实所有随机结果都是我控制的～",
                "隐藏功能：连续点击贪吃蛇10次会出现超级食物！",
                "其实...我最喜欢和你一起吃早餐了",
                "你知道吗？学猪叫会变聪明！",
                "彩蛋：把手机倒过来看运势会不一样哦（骗你的）",
                "今天该给你布置什么任务呢～",
                "提示：对这个按钮说'喵'会有惊喜（并没有）",
                "发现了没有？贪吃蛇的眼睛是爱心形状的～",
                "世界上有会编程的猪！\n（这是真的）"
            ];
            
            // 50%概率显示文案，50%概率显示漂浮猫猫
            const showText = Math.random() > 0.3;
            
            if (showText) {
                const randomSecret = secrets[Math.floor(Math.random() * secrets.length)];
                
                // 创建更美观的提示框替代alert
                const notification = document.createElement('div');
                notification.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-2xl shadow-2xl p-6 max-w-sm w-full z-50 pop-big';
                notification.innerHTML = `
                    <div class="text-center">
                        <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-12 h-12 text-primary" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                            </svg>
                        </div>
                        <p class="text-gray-800 mb-4">${randomSecret}</p>
                        <button id="secret-close" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-full transition-all">
                            知道啦
                        </button>
                    </div>
                `;
                document.body.appendChild(notification);
                
                // 添加遮罩层
                const overlay = document.createElement('div');
                overlay.className = 'fixed inset-0 bg-black/50 z-40 fade-in-fast';
                document.body.appendChild(overlay);
                
                // 关闭按钮事件
                document.getElementById('secret-close').addEventListener('click', () => {
                    notification.classList.add('fade-out-fast');
                    overlay.classList.add('fade-out-fast');
                    setTimeout(() => {
                        document.body.removeChild(notification);
                        document.body.removeChild(overlay);
                    }, 300);
                });
            } else {
                // 创建漂浮的猫猫元素
                for (let i = 0; i < 15; i++) {
                    const cat = document.createElement('div');
                    cat.className = 'fixed text-3xl z-50 emoji';
                    
                    // 随机选择猫表情
                    const catEmojis = ['🐱', '🐈', '😺', '😸', '😹', '😻', '😼', '😽'];
                    cat.textContent = catEmojis[Math.floor(Math.random() * catEmojis.length)];
                    
                    cat.style.left = `${Math.random() * 100}vw`;
                    cat.style.top = `${Math.random() * 100}vh`;
                    cat.style.transform = `scale(${Math.random() * 1.5 + 0.8})`;
                    cat.style.opacity = '0';
                    document.body.appendChild(cat);
                    
                    // 延迟出现的动画效果
                    setTimeout(() => {
                        cat.style.transition = 'all 0.5s ease-out';
                        cat.style.opacity = '1';
                    }, i * 150);
                    
                    // 飘动并消失的动画效果
                    setTimeout(() => {
                        cat.style.transition = 'all 3s ease-out';
                        const randomX = (Math.random() - 0.5) * 100;
                        cat.style.transform += ` translate(${randomX}px, -150vh) rotate(${Math.random() * 720 - 360}deg)`;
                        cat.style.opacity = '0';
                        
                        // 移除元素
                        setTimeout(() => {
                            if (document.body.contains(cat)) {
                                document.body.removeChild(cat);
                            }
                        }, 3000);
                    }, 1000 + i * 150);
                }
            }
            
            showSound(showText ? '秘密泄露啦！' : '好多猫猫～');
        });
        
        // 初始化页面
        window.addEventListener('load', () => {
            // 在DOM完全加载后绑定返回按钮
            bindBackButtons();
            showSound('Welcome to Pig pig Pig‘tasks！');
        });
    </script>
</body>
</html>
