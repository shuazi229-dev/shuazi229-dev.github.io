<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pig pig Pigâ€˜tasks</title>
    <!-- å¼•å…¥Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥Font Awesomeå›¾æ ‡ -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- è‡ªå®šä¹‰é…ç½® -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF3366',
                        secondary: '#33CCFF',
                        accent: '#FFCC00',
                        dark: '#4A4A4A',
                        light: '#FFF9F9'
                    },
                    fontFamily: {
                        funny: ['"Comic Sans MS"', '"Marker Felt"', 'cursive', 'sans-serif'],
                        sans: ['"Comic Sans MS"', '"Marker Felt"', 'cursive', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            /* åŠ¨ç”»æ•ˆæœ */
            .bounce-xl {
                animation: bounceXL 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.4);
            }
            .shake-crazy {
                animation: shakeCrazy 0.5s ease-in-out;
            }
            .spin-wild {
                animation: spinWild 1s ease-in-out;
            }
            .float-random {
                animation: floatRandom 3s ease-in-out infinite;
            }
            .pop-big {
                animation: popBig 0.4s ease-out;
            }
            .fade-in-fast {
                animation: fadeIn 0.3s ease-out;
            }
            .slide-in {
                animation: slideIn 0.5s ease-out;
            }
            .pulse-annoying {
                animation: pulseAnnoying 1s infinite;
            }
        }
        
        /* å…¨å±€å­—ä½“è®¾ç½®ç¡®ä¿æ‰€æœ‰å…ƒç´ ä½¿ç”¨å¯çˆ±é£æ ¼å­—ä½“ï¼Œå¢å¼ºå…¼å®¹æ€§ */
        *, *::before, *::after {
            font-family: 'Comic Sans MS', 'Marker Felt', 'Arial Rounded MT Bold', 'Comic Neue', 'Kalam', 'Chalkboard SE', 'Marker Felt', 'Caveat', cursive, sans-serif !important;
            font-weight: 500;
            letter-spacing: 0.02em;
        }

        /* ç¡®ä¿bodyå’Œä¸»è¦å†…å®¹åŒºåŸŸçš„å­—ä½“åº”ç”¨ */
        body, .content, .game-area, .task-container, .fortune-container, .breakfast-container {
            font-family: 'Comic Sans MS', 'Marker Felt', cursive, sans-serif !important;
        }
        
        @keyframes bounceXL {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-30px) rotate(5deg); }
        }
        
        @keyframes shakeCrazy {
            0%, 100% { transform: translateX(0) rotate(0); }
            10% { transform: translateX(-10px) rotate(-5deg); }
            20% { transform: translateX(10px) rotate(5deg); }
            30% { transform: translateX(-10px) rotate(-5deg); }
            40% { transform: translateX(10px) rotate(5deg); }
            50% { transform: translateX(-10px) rotate(-5deg); }
            60% { transform: translateX(10px) rotate(5deg); }
            70% { transform: translateX(-10px) rotate(-5deg); }
            80% { transform: translateX(10px) rotate(5deg); }
            90% { transform: translateX(-10px) rotate(-5deg); }
        }
        
        @keyframes spinWild {
            0% { transform: rotate(0deg) scale(0.5); opacity: 0; }
            70% { transform: rotate(380deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); opacity: 1; }
        }
        
        @keyframes floatRandom {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(5px, -10px) rotate(2deg); }
            50% { transform: translate(0, -15px) rotate(0deg); }
            75% { transform: translate(-5px, -10px) rotate(-2deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }
        
        @keyframes popBig {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: translateX(-30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes pulseAnnoying {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); box-shadow: 0 0 20px rgba(255, 51, 102, 0.6); }
        }
        /* è‡ªå®šä¹‰å°çŒªæ ·å¼ */
        .pig-icon {
            background: linear-gradient(135deg, #ffb7d5 0%, #ff85b1 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(255, 102, 163, 0.3);
        }
        
        .pig-icon::before {
            content: "ğŸ·";
            font-size: 3rem;
        }
        /* è´ªåƒè›‡æ¸¸æˆæ ·å¼ */
        #snake-game {
            position: relative;
        }
        
        #snake-board {
            border-collapse: collapse;
            margin: 0 auto;
            background-color: #f0f0f0;
            border: 4px solid #4A4A4A;
            border-radius: 8px;
        }
        
        #snake-board td {
            width: 12px;
            height: 12px;
        }
        
        .snake-head {
            background-color: #33CCFF;
            border-radius: 3px;
        }
        
        .snake-body {
            background-color: #66DDFF;
            border-radius: 2px;
        }
        
        .snake-food {
            background-color: #FF3366;
            border-radius: 50%;
        }
        
        .snake-bomb {
            background-color: #FFCC00;
            animation: flash 1s infinite;
        }
        
        @keyframes flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>

<body class="bg-gradient-to-br from-light to-pink-50 min-h-screen font-funny text-dark overflow-x-hidden">
    <!-- éŸ³æ•ˆæç¤ºï¼ˆæ–‡å­—æ¨¡æ‹Ÿï¼‰ -->
    <div id="sound-effect" class="fixed top-4 right-4 bg-black/70 text-white px-3 py-1 rounded-full text-sm z-50 hidden fade-in-fast">
        <i class="fa fa-volume-up mr-1"></i> <span id="sound-text">å®å’šï½</span>
    </div>
    
    <!-- ä¸»å®¹å™¨ -->
    <div class="max-w-3xl mx-auto p-4 md:p-6 relative">
        
        <!-- æ ‡é¢˜åŒºåŸŸ -->
        <header class="text-center mb-8 slide-in">
            <div class="relative inline-block mb-4">
                <!-- ä½¿ç”¨Base64ç¼–ç çš„ç²‰è‰²å°çŒªSVG -->
                <div class="pig-icon w-24 h-24 rounded-full border-4 border-primary float-random">
                    <!-- SVGå°çŒªå›¾æ ‡å°†é€šè¿‡CSSä¼ªå…ƒç´ æ˜¾ç¤º -->
                </div>
            </div>
            <h1 class="text-3xl md:text-4xl font-bold text-primary mb-2 bounce-xl">
                Pig pig Pig's tasks
            </h1>
            <p class="text-gray-600 text-lg mb-6">Please experience and relax!</p>
            <div class="w-40 h-1 bg-secondary mx-auto rounded-full"></div>
        </header>
        
        <!-- ä¸»èœå• -->
        <div id="main-menu" class="grid grid-cols-2 gap-4 mb-8 fade-in-fast">
            <!-- åŠŸèƒ½å¡ç‰‡1ï¼šè´ªåƒè›‡ -->
            <div class="feature-card bg-white rounded-2xl shadow-lg p-5 text-center cursor-pointer transform transition-all hover:scale-105 hover:shadow-xl" data-feature="snake">
                <div class="w-16 h-16 bg-secondary/20 rounded-full flex items-center justify-center mx-auto mb-3">
                    <i class="fa fa-gamepad text-2xl text-secondary"></i>
                </div>
                <h3 class="font-bold text-lg mb-1">è´ªåƒè›‡å¤§ä½œæˆ˜</h3>
                <p class="text-sm text-gray-500">è¾“äº†çš„æ´—ç¢—ï¼</p>
            </div>
            
            <!-- åŠŸèƒ½å¡ç‰‡2ï¼šè¿åŠ¿å åœ -->
            <div class="feature-card bg-white rounded-2xl shadow-lg p-5 text-center cursor-pointer transform transition-all hover:scale-105 hover:shadow-xl" data-feature="fortune">
                <div class="w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mx-auto mb-3">
                    <i class="fa fa-magic text-2xl text-accent"></i>
                </div>
                <h3 class="font-bold text-lg mb-1">ä»Šæ—¥è¿åŠ¿</h3>
                <p class="text-sm text-gray-500">ä¸å‡†ä¸è¦é’±ï¼</p>
            </div>
            
            <!-- åŠŸèƒ½å¡ç‰‡3ï¼šå¥‡æ€ªä»»åŠ¡ -->
            <div class="feature-card bg-white rounded-2xl shadow-lg p-5 text-center cursor-pointer transform transition-all hover:scale-105 hover:shadow-xl" data-feature="tasks">
                <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-3">
                    <i class="fa fa-random text-2xl text-primary"></i>
                </div>
                <h3 class="font-bold text-lg mb-1">çŒªä¹‹ä»»åŠ¡ç”Ÿæˆå™¨</h3>
                <p class="text-sm text-gray-500">æ•¢ä¸æ•¢æ¥æ‹›ï¼Ÿ</p>
            </div>
            
            <!-- åŠŸèƒ½å¡ç‰‡4ï¼šæ—©é¥­é€‰æ‹© -->
            <div class="feature-card bg-white rounded-2xl shadow-lg p-5 text-center cursor-pointer transform transition-all hover:scale-105 hover:shadow-xl" data-feature="breakfast">
                <div class="w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-3">
                    <i class="fa fa-cutlery text-2xl text-green-500"></i>
                </div>
                <h3 class="font-bold text-lg mb-1">æ—©é¤åƒä»€ä¹ˆ</h3>
                <p class="text-sm text-gray-500">é€‰æ‹©å›°éš¾ç—‡æ•‘æ˜Ÿ</p>
            </div>
        </div>
        

        
        <!-- 1. è´ªåƒè›‡æ¸¸æˆ -->
        <div id="snake-feature" class="hidden fade-in-fast">
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-6 relative overflow-hidden">
                <!-- è£…é¥°å…ƒç´  -->
                <div class="absolute -top-8 -right-8 w-32 h-32 bg-secondary/10 rounded-full"></div>
                
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-secondary flex items-center">
                        <i class="fa fa-gamepad mr-2"></i> è´ªåƒè›‡å¤§ä½œæˆ˜
                    </h2>
                    <!-- ä¸“é—¨ä¼˜åŒ–çš„è¿”å›æŒ‰é’® -->
                    <button 
                        id="snake-back-btn" 
                        class="back-btn bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full text-sm transition-all" 
                        style="position: relative; z-index: 9999; display: block; width: auto; height: auto;"
                        onclick="console.log('è¿”å›æŒ‰é’®ç›´æ¥ç‚¹å‡»'); goToMainMenu(); return false;"
                    >
                        <i class="fa fa-arrow-left mr-1"></i> è¿”å›
                    </button>
                </div>
                

                
                <div class="text-center mb-4">
                    <p class="text-gray-600 mb-3">æ¸¸æˆè§„åˆ™ï¼šåƒåˆ°é£Ÿç‰©å˜é•¿ï¼Œæ’åˆ°å¢™æˆ–è‡ªå·±ä¼šæ­»ï¼Œåƒåˆ°ç‚¸å¼¹ä¼šå˜çŸ­ï¼</p>
                    <p class="text-red-500 text-sm mb-4">è¾“çš„äººè´Ÿè´£æ´—ç¢—ä¸‰å¤©ï¼æ•¢ä¸æ•¢ç©ï¼Ÿ</p>
                    
                    <div class="flex justify-center gap-4 mb-4">
                        <div class="bg-gray-100 px-3 py-1 rounded-full">
                            <span class="text-sm">åˆ†æ•°: <span id="snake-score" class="font-bold">0</span></span>
                        </div>
                        <div class="bg-gray-100 px-3 py-1 rounded-full">
                            <span class="text-sm">é•¿åº¦: <span id="snake-length" class="font-bold">1</span></span>
                        </div>
                    </div>
                    
                    <!-- æ¸¸æˆåŒºåŸŸ -->
                    <div id="snake-game" class="mb-4">
                        <table id="snake-board"></table>
                    </div>
                    
                    <!-- æ§åˆ¶æŒ‰é’®ï¼ˆé€‚åˆè§¦å±ï¼‰ -->
                    <div class="snake-controls mt-6 max-w-xs mx-auto">
                        <div class="flex justify-center mb-2">
                            <button class="snake-btn bg-secondary/20 hover:bg-secondary/40 w-14 h-14 rounded-full flex items-center justify-center" data-direction="up">
                                <i class="fa fa-arrow-up text-secondary"></i>
                            </button>
                        </div>
                        <div class="flex justify-center gap-2">
                            <button class="snake-btn bg-secondary/20 hover:bg-secondary/40 w-14 h-14 rounded-full flex items-center justify-center" data-direction="left">
                                <i class="fa fa-arrow-left text-secondary"></i>
                            </button>
                            <button class="snake-btn bg-secondary/20 hover:bg-secondary/40 w-14 h-14 rounded-full flex items-center justify-center" data-direction="down">
                                <i class="fa fa-arrow-down text-secondary"></i>
                            </button>
                            <button class="snake-btn bg-secondary/20 hover:bg-secondary/40 w-14 h-14 rounded-full flex items-center justify-center" data-direction="right">
                                <i class="fa fa-arrow-right text-secondary"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- æ¸¸æˆæ§åˆ¶ -->
                    <div class="mt-6 flex justify-center gap-3">
                        <button id="start-snake" class="bg-secondary hover:bg-secondary/90 text-white px-5 py-2 rounded-full text-sm transition-all">
                            <i class="fa fa-play mr-1"></i> å¼€å§‹æ¸¸æˆ
                        </button>
                        <button id="pause-snake" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-5 py-2 rounded-full text-sm transition-all" disabled>
                            <i class="fa fa-pause mr-1"></i> æš‚åœ
                        </button>
                        <button id="reset-snake" class="bg-primary hover:bg-primary/90 text-white px-5 py-2 rounded-full text-sm transition-all">
                            <i class="fa fa-refresh mr-1"></i> é‡æ–°å¼€å§‹
                        </button>
                    </div>
                    
                    <!-- æ¸¸æˆç»“æŸå¼¹çª— -->
                    <div id="snake-over" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 hidden fade-in-fast">
                        <div class="bg-white rounded-2xl p-6 max-w-sm w-full text-center pop-big">
                            <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fa fa-meh-o text-3xl text-red-500"></i>
                            </div>
                            <h3 class="text-xl font-bold mb-2">æ¸¸æˆç»“æŸï¼</h3>
                            <p class="text-gray-600 mb-4">ä½ çš„åˆ†æ•°: <span id="final-score" class="font-bold">0</span></p>
                            <p class="text-red-500 mb-6 text-sm">æ„¿èµŒæœè¾“ï¼Œä¸‹æ¬¡ä½ æ´—ç¢—ï½</p>
                            <div class="flex flex-col gap-3">
                        <button id="restart-snake" class="bg-secondary hover:bg-secondary/90 text-white px-6 py-2 rounded-full transition-all w-full">
                            å†æ¥ä¸€å±€
                        </button>
                        <button id="close-snake" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-2 rounded-full transition-all w-full">
                            å…³é—­
                        </button>
                    </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 2. è¿åŠ¿å åœ -->
        <div id="fortune-feature" class="hidden fade-in-fast">
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-6 relative overflow-hidden">
                <!-- è£…é¥°å…ƒç´  -->
                <div class="absolute -bottom-10 -left-10 w-32 h-32 bg-accent/10 rounded-full"></div>
                
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-accent flex items-center">
                        <i class="fa fa-magic mr-2"></i> ä»Šæ—¥è¿åŠ¿å åœ
                    </h2>
                    <button class="back-btn bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-sm transition-all">
                        <i class="fa fa-arrow-left mr-1"></i> è¿”å›
                    </button>
                </div>
                
                <div class="text-center">
                    <div class="w-32 h-32 bg-accent/20 rounded-full flex items-center justify-center mx-auto mb-6 relative">
                        <i class="fa fa-star text-4xl text-accent float-random"></i>
                        <div class="absolute inset-0 border-4 border-dashed border-accent/30 rounded-full animate-spin-slow"></div>
                    </div>
                    
                    <p class="mb-6 text-gray-600">æƒ³çŸ¥é“ä»Šå¤©çš„è¿åŠ¿å—ï¼Ÿ<br>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œè®©å®‡å®™ç»™ä½ ç­”æ¡ˆï¼</p>
                    
                    <button id="divine-btn" class="bg-accent hover:bg-accent/90 text-dark px-8 py-3 rounded-full text-lg font-bold shadow-lg transition-all transform hover:scale-105 active:scale-95 mb-8">
                        <i class="fa fa-hand-paper-o mr-2"></i> å¼€å§‹å åœ
                    </button>
                    
                    <!-- è¿åŠ¿ç»“æœ -->
                    <div id="fortune-result" class="hidden">
                        <div class="bg-gray-50 rounded-xl p-6 mb-6 pop-big">
                            <h3 class="text-xl font-bold mb-3 text-accent" id="fortune-title">è¶…å¥½è¿æ—¥ï¼</h3>
                            <p class="text-gray-700 mb-4" id="fortune-description">
                                ä»Šå¤©çŒªä¼šä¸»åŠ¨æ´—ç¢—ã€æ¶èƒŒã€ä¹°å¥¶èŒ¶ï¼Œå¹¶ä¸”ä¸ä¼šé¡¶å˜´ï¼å¿«å»å‘½ä»¤TAåšè¿™åšé‚£å§ï½
                            </p>
                            <div class="flex justify-center">
                                <div class="flex" id="fortune-stars">
                                    <!-- æ˜Ÿæ˜Ÿä¼šåŠ¨æ€ç”Ÿæˆ -->
                                </div>
                            </div>
                        </div>
                        
                        <button id="redivine-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-2 rounded-full transition-all">
                            <i class="fa fa-refresh mr-1"></i> å†å ä¸€æ¬¡
                        </button>
                    </div>
                    
                    <!-- å åœåŠ¨ç”» -->
                    <div id="fortune-loading" class="hidden">
                        <div class="w-16 h-16 border-4 border-accent/30 border-t-accent rounded-full mx-auto animate-spin mb-4"></div>
                        <p class="text-gray-500">å®‡å®™æ­£åœ¨è®¡ç®—ä½ çš„è¿åŠ¿...</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 3. å¥‡æ€ªä»»åŠ¡ç”Ÿæˆå™¨ -->
        <div id="tasks-feature" class="hidden fade-in-fast">
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-6 relative overflow-hidden">
                <!-- è£…é¥°å…ƒç´  -->
                <div class="absolute top-20 right-5 w-20 h-20 bg-primary/10 rounded-full"></div>
                
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-primary flex items-center">
                        <i class="fa fa-random mr-2"></i> çŒªä¹‹ä»»åŠ¡ç”Ÿæˆå™¨
                    </h2>
                    <button class="back-btn bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-sm transition-all">
                        <i class="fa fa-arrow-left mr-1"></i> è¿”å›
                    </button>
                </div>
                
                <div class="text-center">
                    <p class="mb-6 text-gray-600">ç”Ÿæˆä¸€ä¸ªè®©å¯¹æ–¹åšçš„"å¥½äº‹"ï¼Œ<br>ä¸åšå°±è¦æ¥å—æƒ©ç½šå“¦ï¼</p>
                    
                    <button id="generate-task-btn" class="bg-primary hover:bg-primary/90 text-white px-8 py-3 rounded-full text-lg font-bold shadow-lg transition-all transform hover:scale-105 active:scale-95 mb-6">
                        <i class="fa fa-bolt mr-2"></i> ç”Ÿæˆä»»åŠ¡
                    </button>
                    
                    <!-- ä»»åŠ¡å¡ç‰‡ -->
                    <div id="task-card" class="bg-primary/5 rounded-2xl p-6 min-h-[180px] flex items-center justify-center hidden mb-6">
                        <p id="task-text" class="text-xl text-gray-800 leading-relaxed">
                            ç‚¹å‡»ä¸Šé¢çš„æŒ‰é’®ï¼Œç”Ÿæˆä½ çš„ä¸“å±ä»»åŠ¡ï½
                        </p>
                    </div>
                    
                    <!-- æ“ä½œæŒ‰é’® -->
                    <div id="task-actions" class="flex justify-center gap-4 mt-6 hidden">
                        <button id="accept-task-btn" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-full transition-all">
                            <i class="fa fa-check mr-1"></i> æ¥å—
                        </button>
                        <button id="reject-task-btn" class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-full transition-all">
                            <i class="fa fa-times mr-1"></i> æ‹’ç»
                        </button>
                        <button id="new-task-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-2 rounded-full transition-all">
                            <i class="fa fa-refresh mr-1"></i> æ¢ä¸€ä¸ª
                        </button>
                    </div>
                    
                    <!-- ä»»åŠ¡åé¦ˆ -->
                    <div id="task-feedback" class="mt-6 text-center hidden"></div>
                    
                    <!-- ä»»åŠ¡å†å² -->
                    <div class="mt-8">
                        <h3 class="text-lg font-bold mb-3 flex items-center justify-center">
                            <i class="fa fa-history text-gray-500 mr-2"></i> ä»»åŠ¡å†å²
                        </h3>
                        <div id="tasks-history" class="space-y-2 max-h-[150px] overflow-y-auto pr-2 text-sm">
                            <div class="bg-gray-50 p-2 rounded text-gray-600">
                                <i class="fa fa-check-circle text-green-500 mr-1"></i> å­¦çŒ«å«3å£°å¹¶æ‘‡å°¾å·´
                            </div>
                            <div class="bg-gray-50 p-2 rounded text-gray-600">
                                <i class="fa fa-times-circle text-red-500 mr-1"></i> ç»™å¯¹æ–¹æ´—è¢œå­ï¼ˆæ‹’ç»ï¼‰
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 4. æ—©é¥­åƒä»€ä¹ˆ -->
        <div id="breakfast-feature" class="hidden fade-in-fast">
            <div class="bg-white rounded-2xl shadow-xl p-6 mb-6 relative overflow-hidden">
                <!-- è£…é¥°å…ƒç´  -->
                <div class="absolute -top-6 -left-6 w-24 h-24 bg-green-500/10 rounded-full"></div>
                
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-green-500 flex items-center">
                        <i class="fa fa-cutlery mr-2"></i> æ—©é¤åƒä»€ä¹ˆ
                    </h2>
                    <button class="back-btn bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-sm transition-all">
                        <i class="fa fa-arrow-left mr-1"></i> è¿”å›
                    </button>
                </div>
                
                <div class="text-center">
                    <p class="mb-6 text-gray-600">é€‰æ‹©å›°éš¾ç—‡ï¼Ÿ<br>è®©ç³»ç»Ÿå¸®ä½ å†³å®šä»Šå¤©åƒä»€ä¹ˆï¼</p>
                    
                    <!-- é£Ÿç‰©è½¬ç›˜ -->
                    <div class="relative w-64 h-64 mx-auto mb-8">
                        <div id="food-wheel" class="w-full h-full rounded-full border-8 border-green-500 overflow-hidden relative transition-all duration-500">
                            <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                                <div class="w-16 h-16 bg-white rounded-full z-10 shadow-md flex items-center justify-center">
                                    <i class="fa fa-cutlery text-green-500 text-2xl"></i>
                                </div>
                            </div>
                            <div id="wheel-inner" class="w-full h-full">
                                <!-- è½¬ç›˜å†…å®¹ä¼šåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>
                        <div class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-6 h-6 bg-red-500 rounded-full z-20"></div>
                    </div>
                    
                    <button id="spin-wheel-btn" class="bg-green-500 hover:bg-green-600 text-white px-8 py-3 rounded-full text-lg font-bold shadow-lg transition-all transform hover:scale-105 active:scale-95 mb-6">
                        <i class="fa fa-refresh mr-2"></i> å¼€å§‹è½¬ç›˜
                    </button>
                    
                    <!-- ç»“æœæ˜¾ç¤º -->
                    <div id="food-result" class="hidden mb-6">
                        <div class="bg-green-50 rounded-xl p-5 pop-big">
                            <h3 class="text-xl font-bold text-green-600 mb-2" id="result-food">å°ç¬¼åŒ…</h3>
                            <p class="text-gray-600" id="result-description">
                                ä»Šå¤©å°±åƒå°ç¬¼åŒ…å§ï¼è®°å¾—åŠ é†‹ï¼Œç¾å‘³åŠ å€ï½ è°å»ä¹°ï¼ŸçŸ³å¤´å‰ªåˆ€å¸ƒå†³å®šï¼
                            </p>
                        </div>
                    </div>
                    
                    <!-- è‡ªå®šä¹‰é€‰é¡¹ -->
                    <div class="mt-8">
                        <h3 class="text-lg font-bold mb-3">æ·»åŠ æƒ³åƒçš„æ—©é¤</h3>
                        <div class="flex gap-2">
                            <input type="text" id="new-food" placeholder="æ¯”å¦‚ï¼šè±†æµ†æ²¹æ¡" class="flex-1 border border-gray-300 rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500">
                            <button id="add-food-btn" class="bg-green-100 hover:bg-green-200 text-green-700 px-4 py-2 rounded-full transition-all">
                                <i class="fa fa-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- é¡µè„šå½©è›‹ -->
        <footer class="text-center text-gray-500 text-sm mt-8 pb-6">
            <p>æœ¬å·¥å…·æœ€ç»ˆè§£é‡Šæƒå½’æ¯›æ‰€æœ‰ <i class="fa fa-evil text-primary"></i></p>
            <p class="mt-2">å“ˆåŸºç±³æ¯›æ¯›å¤§äºº<button id="secret-easter-egg" class="text-xs text-gray-400 bg-transparent border-none cursor-pointer hover:text-primary">ï¼ˆå·å·ç‚¹æˆ‘ï¼‰</button></p>
        </footer>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentFeature = null;
        let snakeGame = null;
        let wheelSpinning = false;
        
        // DOMå…ƒç´ 
        const mainMenu = document.getElementById('main-menu');
        const features = {
            snake: document.getElementById('snake-feature'),
            fortune: document.getElementById('fortune-feature'),
            tasks: document.getElementById('tasks-feature'),
            breakfast: document.getElementById('breakfast-feature')
        };
        const soundEffect = document.getElementById('sound-effect');
        const soundText = document.getElementById('sound-text');
        const secretEasterEgg = document.getElementById('secret-easter-egg');
        
        // æ˜¾ç¤ºéŸ³æ•ˆæç¤º
        function showSound(text) {
            soundText.textContent = text;
            soundEffect.classList.remove('hidden');
            setTimeout(() => {
                soundEffect.classList.add('hidden');
            }, 1000);
        }
        
        // åˆ‡æ¢åŠŸèƒ½
        function switchFeature(featureName) {
            // éšè—æ‰€æœ‰åŠŸèƒ½
            Object.values(features).forEach(el => {
                if (el) el.classList.add('hidden');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­åŠŸèƒ½
            if (features[featureName]) {
                features[featureName].classList.remove('hidden');
                currentFeature = featureName;
                
                // ç‰¹æ®Šåˆå§‹åŒ–
                if (featureName === 'snake' && !snakeGame) {
                    initSnakeGame();
                } else if (featureName === 'breakfast' && !wheelSpinning) {
                    initFoodWheel();
                }
                
                // ç»‘å®šè¿”å›æŒ‰é’®äº‹ä»¶
                setTimeout(() => {
                    bindBackButtons();
                }, 50);
            }
            
            showSound(`è¿›å…¥${getFeatureName(featureName)}ï¼`);
        }
        
        // è·å–åŠŸèƒ½åç§°
        function getFeatureName(feature) {
            const names = {
                snake: 'è´ªåƒè›‡',
                fortune: 'è¿åŠ¿å åœ',
                tasks: 'äº’æ€¼ä»»åŠ¡',
                breakfast: 'æ—©é¤é€‰æ‹©'
            };
            return names[feature] || feature;
        }
        
        // è¿”å›ä¸»èœå•
        function goToMainMenu() {
            // æš‚åœæ‰€æœ‰å¯èƒ½çš„æ¸¸æˆ/åŠ¨ç”»
            if (snakeGame && snakeGame.running) {
                snakeGame.pause();
                const pauseBtn = document.getElementById('pause-snake');
                const startBtn = document.getElementById('start-snake');
                if (pauseBtn) pauseBtn.disabled = false;
                if (startBtn) startBtn.disabled = true;
            }
            
            // éšè—æ‰€æœ‰åŠŸèƒ½ï¼Œæ˜¾ç¤ºä¸»èœå•
            Object.values(features).forEach(el => {
                if (el) el.classList.add('hidden');
            });
            if (mainMenu) mainMenu.classList.remove('hidden');
            currentFeature = null;
            
            showSound('è¿”å›ä¸»èœå•ï¼');
        }
        
        // ä¿®å¤è´ªåƒè›‡è¿”å›æŒ‰é’®ç‰¹æ®Šé—®é¢˜
        function fixSnakeBackButton() {
            // ä¸“é—¨é’ˆå¯¹è´ªåƒè›‡åŠŸèƒ½çš„è¿”å›æŒ‰é’®è¿›è¡ŒåŸºæœ¬è®¾ç½®
            const snakeBackBtn = document.getElementById('snake-back-btn');
            if (snakeBackBtn) {
                // ç¡®ä¿æŒ‰é’®å¯è§ä¸”å¯ç‚¹å‡»
                snakeBackBtn.style.display = 'block';
                snakeBackBtn.style.visibility = 'visible';
                snakeBackBtn.style.opacity = '1';
                snakeBackBtn.style.pointerEvents = 'auto';
            }
        }
        
        // ç»‘å®šæ‰€æœ‰è¿”å›æŒ‰é’®äº‹ä»¶
        function bindBackButtons() {
            // ä¸ºæ‰€æœ‰è¿”å›æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.back-btn').forEach(btn => {
                // ç¡®ä¿æŒ‰é’®å¯è§ä¸”å¯ç‚¹å‡»
                btn.style.display = 'block';
                btn.style.visibility = 'visible';
                btn.style.opacity = '1';
                btn.style.pointerEvents = 'auto';
                btn.style.cursor = 'pointer';
                
                // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                btn.addEventListener('click', function(e) {
                    goToMainMenu();
                    e.stopPropagation();
                });
            });
        }
        
        // ä¸»èœå•ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.feature-card').forEach(card => {
            card.addEventListener('click', () => {
                const feature = card.getAttribute('data-feature');
                mainMenu.classList.add('hidden');
                switchFeature(feature);
            });
        });
        
        // 1. è´ªåƒè›‡æ¸¸æˆå®ç°
        function initSnakeGame() {
            const boardEl = document.getElementById('snake-board');
            const scoreEl = document.getElementById('snake-score');
            const lengthEl = document.getElementById('snake-length');
            const startBtn = document.getElementById('start-snake');
            const pauseBtn = document.getElementById('pause-snake');
            const restartBtn = document.getElementById('restart-snake');
            const closeBtn = document.getElementById('close-snake');
            const gameOverEl = document.getElementById('snake-over');
            const finalScoreEl = document.getElementById('final-score');
            
            // æ¸¸æˆé…ç½®
            const config = {
                rows: 20,
                cols: 20,
                initialSpeed: 200,
                speedIncrease: 5
            };
            
            // åˆ›å»ºæ¸¸æˆæ¿
            function createBoard() {
                boardEl.innerHTML = '';
                for (let y = 0; y < config.rows; y++) {
                    const row = document.createElement('tr');
                    for (let x = 0; x < config.cols; x++) {
                        const cell = document.createElement('td');
                        cell.id = `cell-${x}-${y}`;
                        row.appendChild(cell);
                    }
                    boardEl.appendChild(row);
                }
            }
            
            // æ¸¸æˆçŠ¶æ€
            let state = {
                snake: [{x: 10, y: 10}],
                direction: 'right',
                nextDirection: 'right',
                food: {x: 5, y: 10},
                bomb: null,
                score: 0,
                speed: config.initialSpeed,
                running: false,
                timer: null
            };
            
            // æ¸²æŸ“æ¸¸æˆ
            function render() {
                // æ¸…ç©ºæ‰€æœ‰å•å…ƒæ ¼
                document.querySelectorAll('#snake-board td').forEach(cell => {
                    cell.className = '';
                });
                
                // æ¸²æŸ“è›‡å¤´
                const head = state.snake[0];
                document.getElementById(`cell-${head.x}-${head.y}`).className = 'snake-head';
                
                // æ¸²æŸ“è›‡èº«
                for (let i = 1; i < state.snake.length; i++) {
                    const segment = state.snake[i];
                    document.getElementById(`cell-${segment.x}-${segment.y}`).className = 'snake-body';
                }
                
                // æ¸²æŸ“é£Ÿç‰©
                document.getElementById(`cell-${state.food.x}-${state.food.y}`).className = 'snake-food';
                
                // æ¸²æŸ“ç‚¸å¼¹ï¼ˆå¶å°”å‡ºç°ï¼‰
                if (state.bomb) {
                    document.getElementById(`cell-${state.bomb.x}-${state.bomb.y}`).className = 'snake-bomb';
                }
                
                // æ›´æ–°åˆ†æ•°
                scoreEl.textContent = state.score;
                lengthEl.textContent = state.snake.length;
            }
            
            // ç”Ÿæˆæ–°é£Ÿç‰©
            function generateFood() {
                let newFood;
                do {
                    newFood = {
                        x: Math.floor(Math.random() * config.cols),
                        y: Math.floor(Math.random() * config.rows)
                    };
                } while (
                    state.snake.some(segment => segment.x === newFood.x && segment.y === newFood.y) ||
                    (state.bomb && state.bomb.x === newFood.x && state.bomb.y === newFood.y)
                );
                
                state.food = newFood;
                
                // 10%æ¦‚ç‡ç”Ÿæˆç‚¸å¼¹
                if (Math.random() < 0.1 && !state.bomb) {
                    generateBomb();
                } else if (state.bomb && Math.random() < 0.3) {
                    // 30%æ¦‚ç‡ç§»é™¤å·²æœ‰çš„ç‚¸å¼¹
                    state.bomb = null;
                }
            }
            
            // ç”Ÿæˆç‚¸å¼¹
            function generateBomb() {
                let newBomb;
                do {
                    newBomb = {
                        x: Math.floor(Math.random() * config.cols),
                        y: Math.floor(Math.random() * config.rows)
                    };
                } while (
                    state.snake.some(segment => segment.x === newBomb.x && segment.y === newBomb.y) ||
                    (state.food.x === newBomb.x && state.food.y === newBomb.y)
                );
                
                state.bomb = newBomb;
                
                // 5ç§’åè‡ªåŠ¨æ¶ˆå¤±
                setTimeout(() => {
                    if (state.bomb && state.running) {
                        state.bomb = null;
                        render();
                    }
                }, 5000);
            }
            
            // ç§»åŠ¨è›‡
            function move() {
                if (!state.running) return;
                
                // æ›´æ–°æ–¹å‘
                state.direction = state.nextDirection;
                
                // åˆ›å»ºæ–°å¤´éƒ¨
                const head = {...state.snake[0]};
                switch (state.direction) {
                    case 'up': head.y--; break;
                    case 'down': head.y++; break;
                    case 'left': head.x--; break;
                    case 'right': head.x++; break;
                }
                
                // ç¢°æ’æ£€æµ‹ï¼ˆå¢™ï¼‰
                if (head.x < 0 || head.x >= config.cols || head.y < 0 || head.y >= config.rows) {
                    gameOver();
                    return;
                }
                
                // ç¢°æ’æ£€æµ‹ï¼ˆè‡ªå·±ï¼‰
                if (state.snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                    gameOver();
                    return;
                }
                
                // æ·»åŠ æ–°å¤´éƒ¨
                state.snake.unshift(head);
                
                // æ£€æµ‹æ˜¯å¦åƒåˆ°é£Ÿç‰©
                if (head.x === state.food.x && head.y === state.food.y) {
                    state.score += 10;
                    state.speed = Math.max(50, config.initialSpeed - (state.score / 10) * config.speedIncrease);
                    generateFood();
                    showSound('å¥½åƒï¼');
                    
                    // æ¯åƒ5ä¸ªé£Ÿç‰©åŠ é€Ÿæç¤º
                    if (state.snake.length % 5 === 0) {
                        showSound('é€Ÿåº¦å˜å¿«å•¦ï¼');
                    }
                } 
                // æ£€æµ‹æ˜¯å¦åƒåˆ°ç‚¸å¼¹
                else if (state.bomb && head.x === state.bomb.x && head.y === state.bomb.y) {
                    state.score = Math.max(0, state.score - 5);
                    state.bomb = null;
                    
                    // ç¼©çŸ­è›‡èº«
                    if (state.snake.length > 3) {
                        state.snake.pop();
                        state.snake.pop();
                        state.snake.pop();
                    } else if (state.snake.length > 1) {
                        state.snake.pop();
                    }
                    
                    showSound('å“å‘€ï¼åƒåˆ°ç‚¸å¼¹äº†ï¼');
                    generateFood();
                }
                // æ²¡åƒåˆ°é£Ÿç‰©ï¼Œç§»é™¤å°¾éƒ¨
                else {
                    state.snake.pop();
                }
                
                // æ¸²æŸ“å¹¶è®¾ç½®ä¸‹ä¸€æ¬¡ç§»åŠ¨
                render();
                state.timer = setTimeout(move, state.speed);
            }
            
            // å¼€å§‹æ¸¸æˆ
            function startGame() {
                if (state.running) return;
                
                state.running = true;
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                showSound('æ¸¸æˆå¼€å§‹ï¼');
                move();
            }
            
            // æš‚åœæ¸¸æˆ
            function pauseGame() {
                if (!state.running) return;
                
                state.running = false;
                clearTimeout(state.timer);
                startBtn.disabled = false;
                pauseBtn.disabled = true;
                showSound('æ¸¸æˆæš‚åœ');
            }
            
            // æ¸¸æˆç»“æŸ
            function gameOver() {
                state.running = false;
                clearTimeout(state.timer);
                finalScoreEl.textContent = state.score;
                gameOverEl.classList.remove('hidden');
                showSound('æ¸¸æˆç»“æŸï¼æ´—ç¢—å»ï¼');
            }
            
            // é‡ç½®æ¸¸æˆ
            function resetGame() {
                state = {
                    snake: [{x: 10, y: 10}],
                    direction: 'right',
                    nextDirection: 'right',
                    food: {x: 5, y: 10},
                    bomb: null,
                    score: 0,
                    speed: config.initialSpeed,
                    running: false,
                    timer: null
                };
                gameOverEl.classList.add('hidden');
                startBtn.disabled = false;
                pauseBtn.disabled = true;
                generateFood();
                render();
            }
            
            // æ–¹å‘æ§åˆ¶
            function setDirection(direction) {
                // é˜²æ­¢180åº¦è½¬å‘
                if (
                    (state.direction === 'up' && direction === 'down') ||
                    (state.direction === 'down' && direction === 'up') ||
                    (state.direction === 'left' && direction === 'right') ||
                    (state.direction === 'right' && direction === 'left')
                ) {
                    return;
                }
                state.nextDirection = direction;
            }
            
            // äº‹ä»¶ç›‘å¬
            startBtn.addEventListener('click', startGame);
            pauseBtn.addEventListener('click', pauseGame);
            restartBtn.addEventListener('click', resetGame);
            document.getElementById('reset-snake').addEventListener('click', resetGame);
            closeBtn.addEventListener('click', () => {
                gameOverEl.classList.add('hidden');
            });
            
            // é”®ç›˜æ§åˆ¶
            document.addEventListener('keydown', (e) => {
                switch (e.key) {
                    case 'ArrowUp': setDirection('up'); break;
                    case 'ArrowDown': setDirection('down'); break;
                    case 'ArrowLeft': setDirection('left'); break;
                    case 'ArrowRight': setDirection('right'); break;
                    case ' ': // ç©ºæ ¼æš‚åœ/ç»§ç»­
                        state.running ? pauseGame() : startGame();
                        break;
                }
            });
            
            // è§¦å±æ§åˆ¶
            document.querySelectorAll('.snake-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const direction = btn.getAttribute('data-direction');
                    setDirection(direction);
                });
            });
            
            // åˆå§‹åŒ–
            createBoard();
            generateFood();
            render();
            
            // æš´éœ²æ¸¸æˆæ§åˆ¶æ–¹æ³•
            snakeGame = {
                start: startGame,
                pause: pauseGame,
                reset: resetGame,
                get running() { return state.running; }
            };
        }
        
        // 2. è¿åŠ¿å åœå®ç°
        function initFortuneTeller() {
            const divineBtn = document.getElementById('divine-btn');
            const redivineBtn = document.getElementById('redivine-btn');
            const resultEl = document.getElementById('fortune-result');
            const loadingEl = document.getElementById('fortune-loading');
            const titleEl = document.getElementById('fortune-title');
            const descEl = document.getElementById('fortune-description');
            const starsEl = document.getElementById('fortune-stars');
            
            // è¿åŠ¿æ•°æ®
            const fortunes = [
                {
                    title: "å¤§å‰ï¼",
                    description: "ä»Šå¤©ä½ ä¼šé‡åˆ°ä¼šè¯´è¯çš„çŒ«!",
                    stars: 5
                },
                {
                    title: "ä¸­å‰",
                    description: "ä»Šå¤©ç©¿è¢œå­ä¼šç»™ä½ å¸¦æ¥å¥½è¿!",
                    stars: 4
                },
                {
                    title: "å°å‰",
                    description: "ä¸‹åˆ3ç‚¹ä¼šæœ‰ç¥ç§˜äººè¯·ä½ å–å¥¶èŒ¶",
                    stars: 3
                },
                {
                    title: "æœ«å‰",
                    description: "ä»Šå¤©æœ‰äººæ­£åœ¨å·å·è®¡åˆ’æƒŠå–œ",
                    stars: 3
                },
                {
                    title: "å°å‡¶",
                    description: "è™½ç„¶æ˜¯å°xiongä½†æ˜¯ä¹Ÿå¾ˆè½¯ï¼",
                    stars: 6
                },
                {
                    title: "ä¸­å‡¶",
                    description: "ä»Šå¤©å¯èƒ½ä¼šæ¶ˆåŒ–ä¸è‰¯ï¼Œè¯·ä½¿ç”¨äººç±»æ…¢é£Ÿç¢—è¿›é£Ÿï¼",
                    stars: 1
                },
                {
                    title: "å¤§å‡¶",
                    description: "ä½†æ²¡å…³ç³»ï¼Œåç€çœ‹å°±æ˜¯å¤§å‰!",
                    stars: 5
                }
            ];
            
            // ç”Ÿæˆæ˜Ÿæ˜Ÿ
            function generateStars(count) {
                starsEl.innerHTML = '';
                for (let i = 0; i < 5; i++) {
                    const star = document.createElement('i');
                    star.className = `fa fa-star text-accent ${i < count ? '' : 'opacity-30'}`;
                    starsEl.appendChild(star);
                }
            }
            
            // å åœ
            function divine() {
                resultEl.classList.add('hidden');
                loadingEl.classList.remove('hidden');
                divineBtn.disabled = true;
                
                showSound('å åœä¸­...');
                
                // æ¨¡æ‹ŸåŠ è½½æ—¶é—´
                setTimeout(() => {
                    const randomFortune = fortunes[Math.floor(Math.random() * fortunes.length)];
                    titleEl.textContent = randomFortune.title;
                    descEl.textContent = randomFortune.description;
                    generateStars(randomFortune.stars);
                    
                    loadingEl.classList.add('hidden');
                    resultEl.classList.remove('hidden');
                    divineBtn.disabled = false;
                    
                    showSound('å åœå®Œæˆï¼');
                }, 2000);
            }
            
            // äº‹ä»¶ç›‘å¬
            divineBtn.addEventListener('click', divine);
            redivineBtn.addEventListener('click', divine);
        }
        
        // åˆå§‹åŒ–è¿åŠ¿å åœ
        initFortuneTeller();
        
        // 3. å¥‡æ€ªä»»åŠ¡ç”Ÿæˆå™¨å®ç°
        function initTaskGenerator() {
            const generateBtn = document.getElementById('generate-task-btn');
            const newTaskBtn = document.getElementById('new-task-btn');
            const acceptBtn = document.getElementById('accept-task-btn');
            const rejectBtn = document.getElementById('reject-task-btn');
            const taskCard = document.getElementById('task-card');
            const taskText = document.getElementById('task-text');
            const taskActions = document.getElementById('task-actions');
            const taskFeedback = document.getElementById('task-feedback');
            const tasksHistory = document.getElementById('tasks-history');
            
            // ä»»åŠ¡åˆ—è¡¨
            const tasks = [
                "å­¦å°ç‹—å«3å£°ï¼Œè¿˜è¦æ‘‡ä¸€ä¸‹å°¾å·´ï¼ˆå¿…é¡»æœ‰åŠ¨ä½œï¼‰",
                "ç»™å¯¹æ–¹æ´—ä¸€æ¬¡è¢œå­ï¼Œå¹¶ä¸”è¦è¾¹æ´—è¾¹å¤¸è¢œå­é¦™",
                "è¿ç»­è¯´10å¥å¤¸å¯¹æ–¹çš„è¯ï¼Œä¸èƒ½é‡å¤ï¼Œå¦åˆ™é‡æ¥",
                "æ¨¡ä»¿å¯¹æ–¹æœ€å¸¸è¯´çš„ä¸€å¥è¯ï¼Œè¦æƒŸå¦™æƒŸè‚–",
                "æŠŠå¯¹æ–¹çš„ç…§ç‰‡è®¾ä¸ºæ‰‹æœºå£çº¸ï¼Œä¿æŒè‡³å°‘3å¤©",
                "ç»™å¯¹æ–¹æŒ‰æ‘©10åˆ†é’Ÿï¼Œæ‰‹æ³•ä¸å¥½ä¼šè¢«æ‰“",
                "å”±ä¸€é¦–è·‘è°ƒçš„æƒ…æ­Œç»™å¯¹æ–¹å¬ï¼Œå¿…é¡»å”±å®Œ",
                "è¯´å‡ºå¯¹æ–¹3ä¸ªä¼˜ç‚¹å’Œ1ä¸ªç¼ºç‚¹ï¼ˆç¼ºç‚¹è¦å§”å©‰ï¼‰",
                "ä¸‹æ¬¡è§é¢ä¸»åŠ¨å¸¦ä¸€ä»½å¯¹æ–¹çˆ±åƒçš„é›¶é£Ÿ",
                "ç­”åº”å¯¹æ–¹ä¸€ä¸ªåˆç†çš„è¦æ±‚ï¼Œä¸èƒ½åæ‚”",
                "åœ¨æœ‹å‹åœˆå‘ä¸€å¼ å¯¹æ–¹çš„ä¸‘ç…§ï¼ˆ3åˆ†é’Ÿåå¯åˆ ï¼‰",
                "å­¦çŒ«å’ªæ’’å¨‡ï¼Œè¯´'æ±‚æ±‚ä½ å•¦'ï¼ŒæŒç»­10ç§’",
                "ç»™å¯¹æ–¹å–3ä¸ªå¯çˆ±çš„å¤–å·ï¼Œå¹¶ä¸”è¦è§£é‡ŠåŸå› ",
                "é™ªå¯¹æ–¹çœ‹ä¸€éƒ¨è‡ªå·±ä¸å–œæ¬¢ä½†å¯¹æ–¹å–œæ¬¢çš„ç”µå½±",
                "è¯´å‡º3ä»¶ä½ å·å·ä¸ºå¯¹æ–¹åšè¿‡çš„äº‹"
            ];
            
            // æƒ©ç½šåˆ—è¡¨
            const punishments = [
                "ç½šä½ æ´—ä¸€ä¸ªæ˜ŸæœŸçš„ç¢—",
                "ç½šä½ ç»™å¯¹æ–¹ä¹°ä¸€æ¯è¶…ç”œå¥¶èŒ¶",
                "ç½šä½ åš20ä¸ªä¿¯å§æ’‘",
                "ç½šä½ ç»™å¯¹æ–¹æŒ‰æ‘©30åˆ†é’Ÿ",
                "ç½šä½ æ‰¿åŒ…ä¸‹æ¬¡çº¦ä¼šæ‰€æœ‰è´¹ç”¨"
            ];
            
            // å½“å‰ä»»åŠ¡
            let currentTask = null;
            
            // ç”Ÿæˆä»»åŠ¡
            function generateTask() {
                taskFeedback.classList.add('hidden');
                const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
                currentTask = randomTask;
                taskText.textContent = randomTask;
                taskCard.classList.remove('hidden');
                taskActions.classList.remove('hidden');
                
                // æ·»åŠ åŠ¨ç”»
                taskCard.classList.remove('pop-big');
                void taskCard.offsetWidth; // é‡ç½®åŠ¨ç”»
                taskCard.classList.add('pop-big');
                
                showSound('ä»»åŠ¡ç”Ÿæˆï¼');
            }
            
            // æ¥å—ä»»åŠ¡
            function acceptTask() {
                if (!currentTask) return;
                
                taskFeedback.innerHTML = `
                    <div class="bg-green-50 text-green-700 p-3 rounded-full inline-block pop-big">
                        <i class="fa fa-check-circle mr-1"></i> å¤ªæ£’äº†ï¼è®°å¾—å±¥è¡Œæ‰¿è¯ºå“¦ï½
                    </div>
                `;
                taskFeedback.classList.remove('hidden');
                taskActions.classList.add('hidden');
                
                // æ·»åŠ åˆ°å†å²
                addToHistory(currentTask, true);
                
                showSound('æ¥å—ä»»åŠ¡ï¼');
            }
            
            // æ‹’ç»ä»»åŠ¡
            function rejectTask() {
                if (!currentTask) return;
                
                const randomPunishment = punishments[Math.floor(Math.random() * punishments.length)];
                
                taskFeedback.innerHTML = `
                    <div class="bg-red-50 text-red-700 p-3 rounded-full inline-block pop-big">
                        <i class="fa fa-times-circle mr-1"></i> æ‹’ç»æ¥å—ä»»åŠ¡ï¼${randomPunishment}
                    </div>
                `;
                taskFeedback.classList.remove('hidden');
                taskActions.classList.add('hidden');
                
                // æ·»åŠ åˆ°å†å²
                addToHistory(currentTask, false);
                
                showSound('å±…ç„¶æ‹’ç»ï¼Ÿ');
            }
            
            // æ·»åŠ åˆ°å†å²
            function addToHistory(task, accepted) {
                const historyItem = document.createElement('div');
                historyItem.className = 'bg-gray-50 p-2 rounded text-gray-600 slide-in';
                historyItem.innerHTML = `
                    <i class="fa ${accepted ? 'fa-check-circle text-green-500' : 'fa-times-circle text-red-500'} mr-1"></i>
                    ${task.substring(0, 20)}${task.length > 20 ? '...' : ''}
                `;
                tasksHistory.insertBefore(historyItem, tasksHistory.firstChild);
                
                // é™åˆ¶å†å²è®°å½•æ•°é‡
                if (tasksHistory.children.length > 5) {
                    tasksHistory.removeChild(tasksHistory.lastChild);
                }
            }
            
            // äº‹ä»¶ç›‘å¬
            generateBtn.addEventListener('click', generateTask);
            newTaskBtn.addEventListener('click', generateTask);
            acceptBtn.addEventListener('click', acceptTask);
            rejectBtn.addEventListener('click', rejectTask);
        }
        
        // åˆå§‹åŒ–ä»»åŠ¡ç”Ÿæˆå™¨
        initTaskGenerator();
        
        // 4. æ—©é¥­é€‰æ‹©å™¨å®ç°
        function initFoodWheel() {
            const wheelEl = document.getElementById('wheel-inner');
            const spinBtn = document.getElementById('spin-wheel-btn');
            const resultEl = document.getElementById('food-result');
            const resultFoodEl = document.getElementById('result-food');
            const resultDescEl = document.getElementById('result-description');
            const newFoodInput = document.getElementById('new-food');
            const addFoodBtn = document.getElementById('add-food-btn');
            
            // é£Ÿç‰©åˆ—è¡¨
            let foods = [
                {name: "å°ç¬¼åŒ…", color: "#FF3366", desc: "ä»Šå¤©å°±åƒå°ç¬¼åŒ…å§ï¼è®°å¾—åŠ é†‹ï¼Œç¾å‘³åŠ å€ï½ è°å»ä¹°ï¼ŸçŸ³å¤´å‰ªåˆ€å¸ƒå†³å®šï¼"},
                {name: "è±†æµ†æ²¹æ¡", color: "#FFCC00", desc: "ç»å…¸æ­é…è±†æµ†æ²¹æ¡ï¼Œç®€å•åˆç¾å‘³ã€‚æ²¹æ¡è¦è¶çƒ­åƒæ‰é¦™å“¦ï¼"},
                {name: "ç…é¥¼æœå­", color: "#FF9900", desc: "æ¥ä¸€å¥—ç…é¥¼æœå­ï¼ŒåŠ ä¸ªè›‹åŠ æ ¹è‚ ï¼Œèƒ½é‡æ»¡æ»¡ä¸€æ•´å¤©ï¼"},
                {name: "é¢åŒ…ç‰›å¥¶", color: "#FF6699", desc: "ç®€å•çš„é¢åŒ…é…ç‰›å¥¶ï¼Œé€‚åˆæ‡’äººã€‚è®°å¾—æŠŠé¢åŒ…çƒ¤ä¸€ä¸‹æ›´é¦™ï½"},
                {name: "ç²¥é…å°èœ", color: "#66CC99", desc: "æ¸…æ·¡çš„ç²¥é…çˆ½å£å°èœï¼Œå…»èƒƒåˆèˆ’æœã€‚ä»Šå¤©å°±åƒè¿™ä¸ªå§ï¼"},
                {name: "ç‰›è‚‰é¢", color: "#CC6633", desc: "çƒ­è…¾è…¾çš„ç‰›è‚‰é¢ï¼ŒåŠ ä¸ªç…è›‹ï¼Œæš–å¿ƒåˆæš–èƒƒã€‚è°è´Ÿè´£ç…®ï¼Ÿ"},
                {name: "é¦„é¥¨", color: "#3399FF", desc: "é²œç¾é¦„é¥¨é…æ±¤å–ï¼Œæš–å’Œåˆèˆ’æœã€‚è¦ä¸è¦åŠ ç‚¹è¾£æ¤’æ²¹ï¼Ÿ"},
                {name: "ä¸‰æ˜æ²»", color: "#FF6666", desc: "è‡ªåˆ¶ä¸‰æ˜æ²»ï¼Œå¥åº·åˆç¾å‘³ã€‚ç«è…¿é¸¡è›‹ç”Ÿèœä¸€æ ·ä¸èƒ½å°‘ï¼"}
            ];
            
            // åˆ›å»ºé£Ÿç‰©è½¬ç›˜
            function createWheel() {
                wheelEl.innerHTML = '';
                const sliceAngle = 360 / foods.length;
                
                foods.forEach((food, index) => {
                    const slice = document.createElement('div');
                    slice.className = 'absolute inset-0';
                    slice.style.transformOrigin = '50% 50%';
                    slice.style.transform = `rotate(${index * sliceAngle}deg)`;
                    slice.style.clipPath = `polygon(50% 50%, 50% 0%, calc(50% + 50% * cos(${sliceAngle}deg * 0.01745)) calc(50% - 50% * sin(${sliceAngle}deg * 0.01745)))`;
                    slice.style.backgroundColor = food.color;
                    
                    // æ·»åŠ æ–‡å­—
                    const text = document.createElement('div');
                    text.className = 'absolute white-space-nowrap transform origin-bottom-left';
                    text.style.left = '50%';
                    text.style.top = '0';
                    text.style.transform = `rotate(${sliceAngle/2}deg) translate(-50%, 0)`;
                    text.style.fontSize = '12px';
                    text.style.fontWeight = 'bold';
                    text.style.color = 'white';
                    text.style.paddingTop = '10px';
                    text.textContent = food.name;
                    
                    slice.appendChild(text);
                    wheelEl.appendChild(slice);
                });
            }
            
            // æ—‹è½¬è½¬ç›˜
            function spinWheel() {
                if (wheelSpinning) return;
                
                wheelSpinning = true;
                spinBtn.disabled = true;
                spinBtn.innerHTML = '<i class="fa fa-spinner fa-spin mr-2"></i> è½¬åŠ¨ä¸­...';
                resultEl.classList.add('hidden');
                
                showSound('è½¬ç›˜å¼€å§‹ï¼');
                
                // éšæœºæ—‹è½¬è§’åº¦ï¼ˆ3-5åœˆï¼‰
                const randomAngle = 360 * (3 + Math.random() * 2) + Math.random() * 360;
                const duration = 5 + Math.random() * 2; // 5-7ç§’
                
                // åº”ç”¨æ—‹è½¬
                const foodWheel = document.getElementById('food-wheel');
                foodWheel.style.transition = `transform ${duration}s cubic-bezier(0.2, 0.8, 0.2, 1)`;
                foodWheel.style.transform = `rotate(${randomAngle}deg)`;
                
                // è®¡ç®—ç»“æœ
                setTimeout(() => {
                    // è®¡ç®—æœ€ç»ˆè§’åº¦ï¼ˆå–æ¨¡360ï¼‰
                    const finalAngle = randomAngle % 360;
                    const sliceAngle = 360 / foods.length;
                    const selectedIndex = Math.floor((360 - finalAngle) % 360 / sliceAngle);
                    const selectedFood = foods[selectedIndex];
                    
                    // æ˜¾ç¤ºç»“æœ
                    resultFoodEl.textContent = selectedFood.name;
                    resultDescEl.textContent = selectedFood.desc;
                    resultEl.classList.remove('hidden');
                    
                    // é‡ç½®çŠ¶æ€
                    wheelSpinning = false;
                    spinBtn.disabled = false;
                    spinBtn.innerHTML = '<i class="fa fa-refresh mr-2"></i> å¼€å§‹è½¬ç›˜';
                    
                    showSound(`ä»Šå¤©åƒ${selectedFood.name}ï¼`);
                }, duration * 1000);
            }
            
            // æ·»åŠ æ–°é£Ÿç‰©
            function addFood() {
                const foodName = newFoodInput.value.trim();
                if (!foodName) return;
                
                // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
                if (foods.some(f => f.name === foodName)) {
                    showSound('è¿™ä¸ªå·²ç»æœ‰å•¦ï¼');
                    return;
                }
                
                // éšæœºé¢œè‰²
                const randomColor = `hsl(${Math.random() * 360}, 80%, 60%)`;
                
                // æ·»åŠ åˆ°åˆ—è¡¨
                foods.push({
                    name: foodName,
                    color: randomColor,
                    desc: `ä»Šå¤©å°±åƒ${foodName}å§ï¼å¬èµ·æ¥å°±å¾ˆç¾å‘³ï½ è°å»å‡†å¤‡å‘¢ï¼Ÿ`
                });
                
                // æ›´æ–°è½¬ç›˜
                createWheel();
                
                // æ¸…ç©ºè¾“å…¥
                newFoodInput.value = '';
                
                showSound('æ·»åŠ æˆåŠŸï¼');
            }
            
            // äº‹ä»¶ç›‘å¬
            spinBtn.addEventListener('click', spinWheel);
            addFoodBtn.addEventListener('click', addFood);
            newFoodInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') addFood();
            });
            
            // åˆå§‹åŒ–è½¬ç›˜
            createWheel();
        }
        
        // éšè—å½©è›‹
        secretEasterEgg.addEventListener('click', () => {
            const secrets = [
                "å·å·å‘Šè¯‰ä½ ï¼šå…¶å®æ‰€æœ‰éšæœºç»“æœéƒ½æ˜¯æˆ‘æ§åˆ¶çš„ï½",
                "éšè—åŠŸèƒ½ï¼šè¿ç»­ç‚¹å‡»è´ªåƒè›‡10æ¬¡ä¼šå‡ºç°è¶…çº§é£Ÿç‰©ï¼",
                "å…¶å®...æˆ‘æœ€å–œæ¬¢å’Œä½ ä¸€èµ·åƒæ—©é¤äº†",
                "ä½ çŸ¥é“å—ï¼Ÿå­¦çŒªå«ä¼šå˜èªæ˜ï¼",
                "å½©è›‹ï¼šæŠŠæ‰‹æœºå€’è¿‡æ¥çœ‹è¿åŠ¿ä¼šä¸ä¸€æ ·å“¦ï¼ˆéª—ä½ çš„ï¼‰",
                "å…¶å®æˆ‘æ¯å¤©éƒ½åœ¨æƒ³è¯¥ç»™ä½ ç”Ÿæˆä»€ä¹ˆä»»åŠ¡ï½"
            ];
            const randomSecret = secrets[Math.floor(Math.random() * secrets.length)];
            
            alert(randomSecret);
            showSound('ç§˜å¯†æ³„éœ²å•¦ï¼');
        });
        
        // åˆå§‹åŒ–é¡µé¢
        window.addEventListener('load', () => {
            // åœ¨DOMå®Œå…¨åŠ è½½åç»‘å®šè¿”å›æŒ‰é’®
            bindBackButtons();
            showSound('Welcome to Pig pig Pigâ€˜tasksï¼');
        });
    </script>
</body>
</html>
